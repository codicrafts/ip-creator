(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64462,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},8684,e=>{"use strict";let t=(0,e.i(1334).createSlice)({name:"image",initialState:{sourceImage:null,mimeType:"image/png",prompt:"",selectedStyle:null,aspectRatio:"16:9",imageSize:"1K",imageFormat:"PNG",resultImage:null,history:[]},reducers:{setSourceImage:(e,t)=>{e.sourceImage=t.payload.image,e.mimeType=t.payload.mimeType},setPrompt:(e,t)=>{e.prompt=t.payload},setSelectedStyle:(e,t)=>{e.selectedStyle=t.payload},setAspectRatio:(e,t)=>{e.aspectRatio=t.payload},setImageSize:(e,t)=>{e.imageSize=t.payload},setImageFormat:(e,t)=>{e.imageFormat=t.payload},setResultImage:(e,t)=>{e.resultImage=t.payload},addToHistory:(e,t)=>{e.history=[t.payload,...e.history].slice(0,10)},removeFromHistory:(e,t)=>{e.history=e.history.filter(e=>e.id!==t.payload)},setHistory:(e,t)=>{e.history=t.payload},resetImageState:e=>{e.sourceImage=null,e.prompt="",e.selectedStyle=null,e.resultImage=null}}}),{setSourceImage:r,setPrompt:a,setSelectedStyle:n,setAspectRatio:s,setImageSize:o,setImageFormat:i,setResultImage:l,addToHistory:u,removeFromHistory:c,setHistory:d,resetImageState:f}=t.actions,p=t.reducer;e.s(["addToHistory",0,u,"default",0,p,"removeFromHistory",0,c,"resetImageState",0,f,"setAspectRatio",0,s,"setHistory",0,d,"setPrompt",0,a,"setResultImage",0,l,"setSelectedStyle",0,n,"setSourceImage",0,r])},93019,e=>{"use strict";var t=e.i(1334),r=e.i(64807);let a={currentView:r.AppView.HOME,loadingState:r.LoadingState.IDLE,errorMsg:null,viewingHistoryItem:null,isSelectionMode:!1,selectedHistoryIds:[],isPaymentModalOpen:!1,isQuotaModalOpen:!1},n=(0,t.createSlice)({name:"app",initialState:a,reducers:{setCurrentView:(e,t)=>{e.currentView=t.payload},setLoadingState:(e,t)=>{e.loadingState=t.payload},setErrorMsg:(e,t)=>{e.errorMsg=t.payload},setViewingHistoryItem:(e,t)=>{e.viewingHistoryItem=t.payload},setIsSelectionMode:(e,t)=>{e.isSelectionMode=t.payload},setSelectedHistoryIds:(e,t)=>{e.selectedHistoryIds=t.payload},toggleHistorySelection:(e,t)=>{let r=t.payload;e.selectedHistoryIds.includes(r)?e.selectedHistoryIds=e.selectedHistoryIds.filter(e=>e!==r):e.selectedHistoryIds.length<9&&e.selectedHistoryIds.push(r)},setIsPaymentModalOpen:(e,t)=>{e.isPaymentModalOpen=t.payload},setIsQuotaModalOpen:(e,t)=>{e.isQuotaModalOpen=t.payload}}}),{setCurrentView:s,setLoadingState:o,setErrorMsg:i,setViewingHistoryItem:l,setIsSelectionMode:u,setSelectedHistoryIds:c,toggleHistorySelection:d,setIsPaymentModalOpen:f,setIsQuotaModalOpen:p}=n.actions,g=n.reducer;e.s(["default",0,g,"setIsPaymentModalOpen",0,f,"setIsQuotaModalOpen",0,p,"setIsSelectionMode",0,u,"setLoadingState",0,o,"setSelectedHistoryIds",0,c,"setViewingHistoryItem",0,l,"toggleHistorySelection",0,d])},64807,e=>{"use strict";var t,r,a,n,s,o=((t={}).HOME="HOME",t.UPLOAD="UPLOAD",t.EDIT="EDIT",t.RESULT="RESULT",t.PROFILE="PROFILE",t.MEME_EDITOR="MEME_EDITOR",t),i=((r={}).IDLE="IDLE",r.UPLOADING="UPLOADING",r.GENERATING="GENERATING",r.ERROR="ERROR",r.SUCCESS="SUCCESS",r),l=((a={}).FREE="FREE",a.PREMIUM="PREMIUM",a),u=((n={}).NONE="none",n.SHAKE="shake",n.PULSE="pulse",n.ZOOM="zoom",n.SPIN="spin",n),c=((s={}).WECHAT="WECHAT",s.ALIPAY="ALIPAY",s);e.s(["AnimationType",()=>u,"AppView",()=>o,"LoadingState",()=>i,"PaymentMethod",()=>c,"UserTier",()=>l])},90816,e=>{"use strict";let t=(0,e.i(1334).createSlice)({name:"meme",initialState:{memeDrafts:[],activeDraftIndex:0,selectedMoodPack:"custom",isExporting:!1,exportWithBackground:!0},reducers:{setMemeDrafts:(e,t)=>{e.memeDrafts=t.payload},updateMemeDraft:(e,t)=>{let{index:r,draft:a}=t.payload;e.memeDrafts[r]&&(e.memeDrafts[r]={...e.memeDrafts[r],...a})},setActiveDraftIndex:(e,t)=>{e.activeDraftIndex=t.payload},setSelectedMoodPack:(e,t)=>{e.selectedMoodPack=t.payload},setIsExporting:(e,t)=>{e.isExporting=t.payload},setExportWithBackground:(e,t)=>{e.exportWithBackground=t.payload}}}),{setMemeDrafts:r,updateMemeDraft:a,setActiveDraftIndex:n,setSelectedMoodPack:s,setIsExporting:o,setExportWithBackground:i}=t.actions,l=t.reducer;e.s(["default",0,l,"setActiveDraftIndex",0,n,"setExportWithBackground",0,i,"setIsExporting",0,o,"setMemeDrafts",0,r,"setSelectedMoodPack",0,s,"updateMemeDraft",0,a])},45604,e=>{"use strict";let t=(0,e.i(57475).default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);e.s(["Wand2",()=>t],45604)},11854,e=>{"use strict";var t,r=e.i(1334),a=e.i(64807),n=((t={}).GUEST="GUEST",t.LOGGED_IN="LOGGED_IN",t);let s={status:"GUEST",userId:null,phone:null,userTier:a.UserTier.FREE,sceneUsage:{date:new Date().toLocaleDateString(),count:0},memeUsage:{date:new Date().toLocaleDateString(),count:0}},o=(0,r.createSlice)({name:"user",initialState:s,reducers:{setUserStatus:(e,t)=>{e.status=t.payload},setUserId:(e,t)=>{e.userId=t.payload},setUserPhone:(e,t)=>{e.phone=t.payload},setUserTier:(e,t)=>{e.userTier=t.payload},setUserInfo:(e,t)=>{e.userId=t.payload.userId,e.phone=t.payload.phone,e.userTier=t.payload.userTier,e.status="LOGGED_IN"},clearUserInfo:e=>{e.status="GUEST",e.userId=null,e.phone=null,e.userTier=a.UserTier.FREE,e.sceneUsage={date:new Date().toLocaleDateString(),count:0},e.memeUsage={date:new Date().toLocaleDateString(),count:0}},setSceneUsage:(e,t)=>{e.sceneUsage=t.payload},setMemeUsage:(e,t)=>{e.memeUsage=t.payload},setDailyUsage:(e,t)=>{e.sceneUsage=t.payload},updateSceneUsage:(e,t)=>{let r=new Date().toLocaleDateString();e.sceneUsage.date!==r?e.sceneUsage={date:r,count:t.payload}:e.sceneUsage.count+=t.payload},updateMemeUsage:(e,t)=>{let r=new Date().toLocaleDateString();e.memeUsage.date!==r?e.memeUsage={date:r,count:t.payload}:e.memeUsage.count+=t.payload},updateUsage:(e,t)=>{let r=new Date().toLocaleDateString();e.sceneUsage.date!==r?e.sceneUsage={date:r,count:t.payload}:e.sceneUsage.count+=t.payload},resetDailyUsage:e=>{let t=new Date().toLocaleDateString();e.sceneUsage.date!==t&&(e.sceneUsage={date:t,count:0}),e.memeUsage.date!==t&&(e.memeUsage={date:t,count:0})}}}),{setUserStatus:i,setUserId:l,setUserPhone:u,setUserTier:c,setUserInfo:d,clearUserInfo:f,setSceneUsage:p,setMemeUsage:g,setDailyUsage:m,updateSceneUsage:y,updateMemeUsage:h,updateUsage:S,resetDailyUsage:x}=o.actions,I=o.reducer;e.s(["UserStatus",()=>n,"clearUserInfo",0,f,"default",0,I,"setMemeUsage",0,g,"setSceneUsage",0,p,"setUserInfo",0,d,"setUserStatus",0,i,"setUserTier",0,c,"updateMemeUsage",0,h,"updateSceneUsage",0,y])},6113,e=>{"use strict";function t(){let e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${a}`}function r(e){if(e instanceof Date){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${a}`}let t=new Date(e);if(!isNaN(t.getTime())){let e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${a}`}if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;let r=e.split(/[\/\-]/);if(3===r.length){let e,t,a;return 4===r[0].length?(e=r[0],t=r[1].padStart(2,"0"),a=r[2].padStart(2,"0")):(t=r[0].padStart(2,"0"),a=r[1].padStart(2,"0"),e=r[2]),`${e}-${t}-${a}`}return e}e.s(["getTodayDateString",()=>t,"normalizeDateString",()=>r])},53528,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={cancelIdleCallback:function(){return o},requestIdleCallback:function(){return s}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let s="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},o="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},78009,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return x},handleClientScriptLoad:function(){return y},initScriptLoader:function(){return h}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let s=e.r(81258),o=e.r(44066),i=e.r(1972),l=s._(e.r(23674)),u=o._(e.r(75305)),c=e.r(53685),d=e.r(4064),f=e.r(53528),p=new Map,g=new Set,m=e=>{let{src:t,id:r,onLoad:a=()=>{},onReady:n=null,dangerouslySetInnerHTML:s,children:o="",strategy:i="afterInteractive",onError:u,stylesheets:c}=e,f=r||t;if(f&&g.has(f))return;if(p.has(t)){g.add(f),p.get(t).then(a,u);return}let m=()=>{n&&n(),g.add(f)},y=document.createElement("script"),h=new Promise((e,t)=>{y.addEventListener("load",function(t){e(),a&&a.call(this,t),m()}),y.addEventListener("error",function(e){t(e)})}).catch(function(e){u&&u(e)});s?(y.innerHTML=s.__html||"",m()):o?(y.textContent="string"==typeof o?o:Array.isArray(o)?o.join(""):"",m()):t&&(y.src=t,p.set(t,h)),(0,d.setAttributesFromProps)(y,e),"worker"===i&&y.setAttribute("type","text/partytown"),y.setAttribute("data-nscript",i),c&&(e=>{if(l.default.preinit)return e.forEach(e=>{l.default.preinit(e,{as:"style"})});if("undefined"!=typeof window){let t=document.head;e.forEach(e=>{let r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,t.appendChild(r)})}})(c),document.body.appendChild(y)};function y(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,f.requestIdleCallback)(()=>m(e))}):m(e)}function h(e){e.forEach(y),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");g.add(t)})}function S(e){let{id:t,src:r="",onLoad:a=()=>{},onReady:n=null,strategy:s="afterInteractive",onError:o,stylesheets:d,...p}=e,{updateScripts:y,scripts:h,getIsSsr:S,appDir:x,nonce:I}=(0,u.useContext)(c.HeadManagerContext);I=p.nonce||I;let v=(0,u.useRef)(!1);(0,u.useEffect)(()=>{let e=t||r;v.current||(n&&e&&g.has(e)&&n(),v.current=!0)},[n,t,r]);let E=(0,u.useRef)(!1);if((0,u.useEffect)(()=>{if(!E.current){if("afterInteractive"===s)m(e);else"lazyOnload"===s&&("complete"===document.readyState?(0,f.requestIdleCallback)(()=>m(e)):window.addEventListener("load",()=>{(0,f.requestIdleCallback)(()=>m(e))}));E.current=!0}},[e,s]),("beforeInteractive"===s||"worker"===s)&&(y?(h[s]=(h[s]||[]).concat([{id:t,src:r,onLoad:a,onReady:n,onError:o,...p,nonce:I}]),y(h)):S&&S()?g.add(t||r):S&&!S()&&m({...e,nonce:I})),x){if(d&&d.forEach(e=>{l.default.preinit(e,{as:"style"})}),"beforeInteractive"===s)if(!r)return p.dangerouslySetInnerHTML&&(p.children=p.dangerouslySetInnerHTML.__html,delete p.dangerouslySetInnerHTML),(0,i.jsx)("script",{nonce:I,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([0,{...p,id:t}])})`}});else return l.default.preload(r,p.integrity?{as:"script",integrity:p.integrity,nonce:I,crossOrigin:p.crossOrigin}:{as:"script",nonce:I,crossOrigin:p.crossOrigin}),(0,i.jsx)("script",{nonce:I,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([r,{...p,id:t}])})`}});"afterInteractive"===s&&r&&l.default.preload(r,p.integrity?{as:"script",integrity:p.integrity,nonce:I,crossOrigin:p.crossOrigin}:{as:"script",nonce:I,crossOrigin:p.crossOrigin})}return null}Object.defineProperty(S,"__nextScript",{value:!0});let x=S;("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},56992,e=>{"use strict";var t=e.i(1972),r=e.i(44783),a=e.i(1334),n=e.i(6581),s=e.i(93019),o=e.i(8684),i=e.i(90816),l=e.i(11854);let u=(0,n.combineReducers)({app:s.default,image:o.default,meme:i.default,user:l.default});function c(e){return(0,a.configureStore)({reducer:u,preloadedState:e})}c();var d=e.i(75305),f=e.i(24569),p=e.i(64807),g=e.i(6113);let m="ip_creative_scene_usage",y="ip_creative_meme_usage";function h({initialUserState:e,initialHistory:t}){let r=(0,f.useAppDispatch)(),a=(0,f.useAppSelector)(e=>e.user.userId);(0,f.useAppSelector)(e=>e.user.userTier);let n=(0,f.useAppSelector)(e=>e.user.sceneUsage),s=(0,f.useAppSelector)(e=>e.user.memeUsage),i=(0,f.useAppSelector)(e=>e.image.history),u=(0,d.useRef)(!1);(0,d.useEffect)(()=>{if(!u.current){if(u.current=!0,e)if(e.userId)(!a||a!==e.userId)&&(r((0,l.setUserInfo)({userId:e.userId,phone:e.phone||"",userTier:e.userTier||p.UserTier.FREE})),e.sceneUsage&&r((0,l.setSceneUsage)(e.sceneUsage)),e.memeUsage&&r((0,l.setMemeUsage)(e.memeUsage)));else{r((0,l.setUserStatus)(l.UserStatus.GUEST));let e=localStorage.getItem(m);if(e)try{let t=JSON.parse(e);r((0,l.setSceneUsage)(t))}catch(e){console.error("Failed to load scene usage",e)}let t=localStorage.getItem(y);if(t)try{let e=JSON.parse(t);r((0,l.setMemeUsage)(e))}catch(e){console.error("Failed to load meme usage",e)}}t&&t.length>0&&0===i.length&&r((0,o.setHistory)(t))}},[r,e,t,i]);let c=(0,f.useAppSelector)(e=>e.user.status);return(0,d.useEffect)(()=>{c===l.UserStatus.GUEST&&localStorage.setItem(m,JSON.stringify(n))},[n,c]),(0,d.useEffect)(()=>{c===l.UserStatus.GUEST&&localStorage.setItem(y,JSON.stringify(s))},[s,c]),null}function S({children:e,initialUserState:a,initialHistory:n}){let s=(0,d.useRef)(null);if(!s.current){let e={};a&&(e.user={status:a.userId?l.UserStatus.LOGGED_IN:l.UserStatus.GUEST,userId:a.userId||null,phone:a.phone||null,userTier:a.userTier||p.UserTier.FREE,sceneUsage:a.sceneUsage||{date:(0,g.getTodayDateString)(),count:0},memeUsage:a.memeUsage||{date:(0,g.getTodayDateString)(),count:0}}),n&&(e.image={sourceImage:null,mimeType:"image/png",prompt:"",selectedStyle:null,aspectRatio:"16:9",imageSize:"1K",imageFormat:"PNG",resultImage:null,history:n}),s.current=c(e)}return(0,t.jsxs)(r.Provider,{store:s.current,children:[(0,t.jsx)(h,{initialUserState:a,initialHistory:n}),e]})}e.s(["default",()=>S],56992)},90177,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return l},searchParamsToUrlQuery:function(){return s},urlQueryToSearchParams:function(){return i}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});function s(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,o(e));else t.set(r,o(a));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},3614,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return i},formatWithValidation:function(){return u},urlObjectKeys:function(){return l}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let s=e.r(44066)._(e.r(90177)),o=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:r}=e,a=e.protocol||"",n=e.pathname||"",i=e.hash||"",l=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=String(s.urlQueryToSearchParams(l)));let c=e.search||l&&`?${l}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||o.test(a))&&!1!==u?(u="//"+(u||""),n&&"/"!==n[0]&&(n="/"+n)):u||(u=""),i&&"#"!==i[0]&&(i="#"+i),c&&"?"!==c[0]&&(c="?"+c),n=n.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${a}${u}${n}${c}${i}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function u(e){return i(e)}},93359,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let a=e.r(75305);function n(e,t){let r=(0,a.useRef)(null),n=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=s(e,a)),t&&(n.current=s(t,a))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},94216,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return h},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return I},NormalizeError:function(){return S},PageNotFoundError:function(){return x},SP:function(){return m},ST:function(){return y},WEB_VITALS:function(){return s},execOnce:function(){return o},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return c},isAbsoluteUrl:function(){return l},isResSent:function(){return f},loadGetInitialProps:function(){return g},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return E}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let s=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>i.test(e);function u(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=u();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function g(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await g(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&f(r))return a;if(!a)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let m="undefined"!=typeof performance,y=m&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class h extends Error{}class S extends Error{}class x extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class I extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function E(e){return JSON.stringify({message:e.message,stack:e.stack})}},26856,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return s}});let a=e.r(94216),n=e.r(17054);function s(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,n.hasBasePath)(r.pathname)}catch(e){return!1}}},52335,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},2854,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return h},useLinkStatus:function(){return x}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let s=e.r(44066),o=e.r(1972),i=s._(e.r(75305)),l=e.r(3614),u=e.r(311),c=e.r(93359),d=e.r(94216),f=e.r(38636);e.r(64462);let p=e.r(77514),g=e.r(26856),m=e.r(64914);function y(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function h(t){var r;let a,n,s,[l,h]=(0,i.useOptimistic)(p.IDLE_LINK_STATUS),x=(0,i.useRef)(null),{href:I,as:v,children:E,prefetch:b=null,passHref:U,replace:O,shallow:M,scroll:_,onClick:P,onMouseEnter:j,onTouchStart:T,legacyBehavior:w=!1,onNavigate:D,ref:L,unstable_dynamicOnHover:N,...R}=t;a=E,w&&("string"==typeof a||"number"==typeof a)&&(a=(0,o.jsx)("a",{children:a}));let k=i.default.useContext(u.AppRouterContext),A=!1!==b,C=!1!==b?null===(r=b)||"auto"===r?m.FetchStrategy.PPR:m.FetchStrategy.Full:m.FetchStrategy.PPR,{href:H,as:$}=i.default.useMemo(()=>{let e=y(I);return{href:e,as:v?y(v):e}},[I,v]);if(w){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});n=i.default.Children.only(a)}let F=w?n&&"object"==typeof n&&n.ref:L,z=i.default.useCallback(e=>(null!==k&&(x.current=(0,p.mountLinkInstance)(e,H,k,C,A,h)),()=>{x.current&&((0,p.unmountLinkForCurrentNavigation)(x.current),x.current=null),(0,p.unmountPrefetchableInstance)(e)}),[A,H,k,C,h]),G={ref:(0,c.useMergedRef)(z,F),onClick(t){w||"function"!=typeof P||P(t),w&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(t),!k||t.defaultPrevented||function(t,r,a,n,s,o,l){if("undefined"!=typeof window){let u,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((u=t.currentTarget.getAttribute("target"))&&"_self"!==u||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,g.isLocalURL)(r)){s&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(75441);i.default.startTransition(()=>{d(a||r,s?"replace":"push",o??!0,n.current)})}}(t,H,$,x,O,_,D)},onMouseEnter(e){w||"function"!=typeof j||j(e),w&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),k&&A&&(0,p.onNavigationIntent)(e.currentTarget,!0===N)},onTouchStart:function(e){w||"function"!=typeof T||T(e),w&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),k&&A&&(0,p.onNavigationIntent)(e.currentTarget,!0===N)}};return(0,d.isAbsoluteUrl)($)?G.href=$:w&&!U&&("a"!==n.type||"href"in n.props)||(G.href=(0,f.addBasePath)($)),s=w?i.default.cloneElement(n,G):(0,o.jsx)("a",{...R,...G,children:a}),(0,o.jsx)(S.Provider,{value:l,children:s})}e.r(52335);let S=(0,i.createContext)(p.IDLE_LINK_STATUS),x=()=>(0,i.useContext)(S);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},66721,e=>{"use strict";var t=e.i(1972),r=e.i(30499),a=e.i(2854),n=e.i(57475);let s=(0,n.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),o=(0,n.default)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),i=(0,n.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var l=e.i(45604);let u=()=>{let e=(0,r.usePathname)(),n="/"===e,u="/profile"===e||"/me"===e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 pb-safe-area shadow-lg z-50 h-16 flex items-center justify-around px-6 md:hidden",children:[(0,t.jsxs)(a.default,{href:"/",className:`flex flex-col items-center justify-center space-y-1 ${n?"text-violet-600":"text-gray-400"}`,children:[(0,t.jsx)(s,{size:24,strokeWidth:n?2.5:2}),(0,t.jsx)("span",{className:"text-[10px] font-medium",children:"首页"})]}),(0,t.jsxs)(a.default,{href:"/create",className:"flex flex-col items-center justify-center -mt-6",children:[(0,t.jsx)("div",{className:"bg-violet-600 text-white p-3 rounded-full shadow-violet-200 shadow-xl transform transition-transform active:scale-95",children:(0,t.jsx)(o,{size:32})}),(0,t.jsx)("span",{className:"text-[10px] font-medium text-gray-600 mt-1",children:"创作"})]}),(0,t.jsxs)(a.default,{href:"/profile",className:`flex flex-col items-center justify-center space-y-1 ${u?"text-violet-600":"text-gray-400"}`,children:[(0,t.jsx)(i,{size:24,strokeWidth:u?2.5:2}),(0,t.jsx)("span",{className:"text-[10px] font-medium",children:"我的"})]})]}),(0,t.jsxs)("div",{className:"hidden md:flex fixed top-0 left-0 right-0 bg-white border-b border-gray-100 shadow-sm z-50 h-16 items-center justify-between px-8",children:[(0,t.jsxs)(a.default,{href:"/",className:"flex items-center gap-2 text-violet-600 hover:text-violet-700 transition-colors",children:[(0,t.jsx)(l.Wand2,{size:24}),(0,t.jsx)("span",{className:"font-bold text-lg",children:"IP 创想坊"})]}),(0,t.jsxs)("nav",{className:"flex items-center gap-1",children:[(0,t.jsx)(a.default,{href:"/",className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-violet-50 text-violet-600":"text-gray-600 hover:bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s,{size:18}),(0,t.jsx)("span",{children:"首页"})]})}),(0,t.jsx)(a.default,{href:"/create",className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"/create"===e||"/upload"===e?"bg-violet-50 text-violet-600":"text-gray-600 hover:bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o,{size:18}),(0,t.jsx)("span",{children:"创作"})]})}),(0,t.jsx)(a.default,{href:"/profile",className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${u?"bg-violet-50 text-violet-600":"text-gray-600 hover:bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i,{size:18}),(0,t.jsx)("span",{children:"我的"})]})})]})]})]})};function c(){return["/result","/edit"].includes((0,r.usePathname)())?null:(0,t.jsx)(u,{})}e.s(["default",()=>c],66721)}]);