(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27718,e=>{"use strict";let t=(0,e.i(57475).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],27718)},36918,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},8778,(e,t,r)=>{"use strict";let o;Object.defineProperty(r,"__esModule",{value:!0}),r.parse=function(e,t){let r=new c,o=e.length;if(o<2)return r;let i=t?.decode||f,n=0;do{let t=e.indexOf("=",n);if(-1===t)break;let s=e.indexOf(";",n),a=-1===s?o:s;if(t>a){n=e.lastIndexOf(";",t-1)+1;continue}let u=l(e,n,t),c=d(e,t,u),f=e.slice(u,c);if(void 0===r[f]){let o=l(e,t+1,a),n=d(e,a,o),s=i(e.slice(o,n));r[f]=s}n=a+1}while(n<o)return r},r.serialize=function(e,t,r){let o=r?.encode||encodeURIComponent;if(!i.test(e))throw TypeError(`argument name is invalid: ${e}`);let c=o(t);if(!n.test(c))throw TypeError(`argument val is invalid: ${t}`);let l=e+"="+c;if(!r)return l;if(void 0!==r.maxAge){if(!Number.isInteger(r.maxAge))throw TypeError(`option maxAge is invalid: ${r.maxAge}`);l+="; Max-Age="+r.maxAge}if(r.domain){if(!s.test(r.domain))throw TypeError(`option domain is invalid: ${r.domain}`);l+="; Domain="+r.domain}if(r.path){if(!a.test(r.path))throw TypeError(`option path is invalid: ${r.path}`);l+="; Path="+r.path}if(r.expires){var d;if(d=r.expires,"[object Date]"!==u.call(d)||!Number.isFinite(r.expires.valueOf()))throw TypeError(`option expires is invalid: ${r.expires}`);l+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(l+="; HttpOnly"),r.secure&&(l+="; Secure"),r.partitioned&&(l+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${r.sameSite}`)}return l};let i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,u=Object.prototype.toString,c=((o=function(){}).prototype=Object.create(null),o);function l(e,t,r){do{let r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r)return r}function d(e,t,r){for(;t>r;){let r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function f(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},57996,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRenderPhase=r.isClientSide=r.decode=r.stringify=void 0,r.stringify=function(e){try{if("string"==typeof e)return e;return JSON.stringify(e)}catch(t){return e}},r.decode=function(e){return e?e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):e},r.isClientSide=function(e){return!(null==e?void 0:e.req)&&!(null==e?void 0:e.res)&&!(e&&"cookies"in e&&(null==e?void 0:e.cookies))},r.getRenderPhase=function(){return"undefined"==typeof window?"server":"client"}},36575,(e,t,r)=>{"use strict";var o=e.e&&e.e.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.revalidateCookies=r.hasCookie=r.deleteCookie=r.setCookie=r.getCookie=r.getCookies=void 0;var i=e.r(8778),n=e.r(57996),s=function(e){if(!(0,n.isClientSide)(e))throw Error("You are trying to access cookies on the server side. Please, use the server-side import with `cookies-next/server` instead.")},a=function(e){if(s(e),"server"!==(0,n.getRenderPhase)()){for(var t={},r=document.cookie?document.cookie.split("; "):[],o=0,i=r.length;o<i;o++){var a=r[o].split("="),u=a.slice(1).join("=");t[a[0]]=u}return t}};r.getCookies=a,r.getCookie=function(e,t){s(t);var r=a(t),o=null==r?void 0:r[e];if(void 0!==o)return(0,n.decode)(o)};var u=function(e,t,r){if(s(r),"server"!==(0,n.getRenderPhase)()){var a=(0,i.serialize)(e,(0,n.stringify)(t),o({path:"/"},r||{}));document.cookie=a}};r.setCookie=u,r.deleteCookie=function(e,t){s(t),u(e,"",o(o({},t),{maxAge:-1}))},r.hasCookie=function(e,t){if(s(t),!e)return!1;var r=a(t);return!!r&&Object.prototype.hasOwnProperty.call(r,e)},r.revalidateCookies=function(e,t){if(s(),"server"!==(0,n.getRenderPhase)()){var r=a();Object.keys(o(o({},r),t)).some(function(e){return(null==r?void 0:r[e])!==(null==t?void 0:t[e])})&&(e(r),t=r)}}},42843,(e,t,r)=>{"use strict";var o=e.e&&e.e.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.CookieProvider=r.CookieContext=void 0;var a=s(e.r(75305)),u=e.r(51318),c=e.r(57996);r.CookieContext=(0,a.createContext)(null),r.CookieProvider=function(e){var t=e.children,i=e.pollingOptions,n=(0,a.useState)({}),s=n[0],l=n[1];(0,a.useEffect)(function(){var e=(0,u.getCookies)();e&&l(e)},[]),(0,u.useCookiesPolling)(function(e){e&&l(e)},i);var d=(0,a.useMemo)(function(){return{cookies:s,set:function(e,t){l(function(r){var i;return o(o({},r),((i={})[e]=encodeURIComponent((0,c.stringify)(t)),i))})},get:function(e){return null==s?void 0:s[e]},getAll:function(){return s},has:function(e){return s.hasOwnProperty(e)},delete:function(e){s.hasOwnProperty(e)&&l(function(t){var r=o({},t);return delete r[e],r})},revalidateCookiesState:function(){(0,u.revalidateCookies)(function(e){e&&l(e)},s)}}},[s]);return a.default.createElement(r.CookieContext.Provider,{value:d},t)}},56324,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useRevalidateCookiesState=r.useReactiveHasCookie=r.useReactiveDeleteCookie=r.useReactiveSetCookie=r.useReactiveGetCookie=r.useReactiveGetCookies=r.useReactiveCookiesNext=r.useCookiesNext=r.useHasCookie=r.useDeleteCookie=r.useSetCookie=r.useGetCookie=r.useGetCookies=r.useCookiesPolling=void 0;var o=e.r(42843),i=e.r(75305),n=e.r(36575),s=function(e){var t=(0,i.useState)(!1),r=t[0],o=t[1];return(0,i.useEffect)(function(){o(!0)},[]),r?e:function(){}},a=function(){var e=(0,i.useContext)(o.CookieContext);if(!e)throw Error("useCookieContext must be used within a CookieProvider");return e};r.useCookiesPolling=function(e,t){var r=t||{},o=r.intervalMs,s=void 0===o?1e3:o,a=r.enabled,u=void 0!==a&&a;(0,i.useEffect)(function(){if(u){var t=(0,n.getCookies)(),r=setInterval(function(){(0,n.revalidateCookies)(e,t)},s);return function(){return clearInterval(r)}}},[e,s])};var u=function(){return s(n.getCookies)};r.useGetCookies=u;var c=function(){return s(n.getCookie)};r.useGetCookie=c;var l=function(){return s(n.hasCookie)};r.useHasCookie=l;var d=function(){return s(n.setCookie)};r.useSetCookie=d;var f=function(){return s(n.deleteCookie)};r.useDeleteCookie=f,r.useCookiesNext=function(){return{getCookies:u(),getCookie:c(),hasCookie:l(),setCookie:d(),deleteCookie:f()}};var v=function(){var e=a();return function(){return null==e?void 0:e.getAll()}};r.useReactiveGetCookies=v;var p=function(){var e=a();return function(t){return null==e?void 0:e.get(t)}};r.useReactiveGetCookie=p;var g=function(){var e=a();return function(t,r,o){return null==e||e.set(t,r),(0,n.setCookie)(t,r,o)}};r.useReactiveSetCookie=g;var k=function(){var e=a();return function(t,r){return null==e||e.delete(t),(0,n.deleteCookie)(t,r)}};r.useReactiveDeleteCookie=k;var h=function(){var e=a();return function(t){return null==e?void 0:e.has(t)}};r.useReactiveHasCookie=h;var y=function(){var e=a();return function(){null==e||e.revalidateCookiesState()}};r.useRevalidateCookiesState=y,r.useReactiveCookiesNext=function(){return{getCookies:v(),getCookie:p(),hasCookie:h(),setCookie:g(),deleteCookie:k(),revalidateCookiesState:y()}}},51318,(e,t,r)=>{"use strict";var o=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.CookiesNextProvider=void 0,i(e.r(36918),r),i(e.r(36575),r);var n=e.r(42843);Object.defineProperty(r,"CookiesNextProvider",{enumerable:!0,get:function(){return n.CookieProvider}}),i(e.r(56324),r)},18411,(e,t,r)=>{"use strict";var o=e.e&&e.e.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},s=e.e&&e.e.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(i,n){function s(e){try{u(o.next(e))}catch(e){n(e)}}function a(e){try{u(o.throw(e))}catch(e){n(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((o=o.apply(e,t||[])).next())})},a=e.e&&e.e.__generator||function(e,t){var r,o,i,n,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(a){return function(u){var c=[a,u];if(r)throw TypeError("Generator is already executing.");for(;n&&(n=0,c[0]&&(s=0)),s;)try{if(r=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,o=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(6===c[0]&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(e){c=[6,e],o=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},u=e.e&&e.e.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)0>t.indexOf(o[i])&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(r[o[i]]=e[o[i]]);return r};Object.defineProperty(r,"__esModule",{value:!0}),r.hasCookie=r.deleteCookie=r.setCookie=r.getCookie=r.getCookies=void 0;var c=e.r(8778),l=e.r(57996),d=function(e){if((0,l.isClientSide)(e))throw Error("You are trying to access cookies on the client side. Please, use the client-side import with `cookies-next/client` instead.")},f=function(e){return!!e&&"getAll"in e&&"set"in e&&"function"==typeof e.getAll&&"function"==typeof e.set},v=function(e){return!!(null==e?void 0:e.req)&&"cookies"in e.req&&f(e.req.cookies)||!!(null==e?void 0:e.res)&&"cookies"in e.res&&f(e.res.cookies)||!!e&&"cookies"in e&&"function"==typeof e.cookies},p=function(e){var t={};return e.getAll().forEach(function(e){var r=e.name,o=e.value;t[r]=o}),t},g=function(e){return s(void 0,void 0,void 0,function(){var t,r;return a(this,function(o){switch(o.label){case 0:if(d(e),!v(e))return[3,2];if(e.req)return[2,p(e.req.cookies)];if(e.res)return[2,p(e.res.cookies)];if(!e.cookies)return[3,2];return t=p,[4,e.cookies()];case 1:return[2,t.apply(void 0,[o.sent()])];case 2:if((null==e?void 0:e.req)&&(r=e.req),null==r?void 0:r.cookies)return[2,r.cookies];if(null==r?void 0:r.headers.cookie)return[2,(0,c.parse)(r.headers.cookie)];return[2,{}]}})})};r.getCookies=g,r.getCookie=function(e,t){return s(void 0,void 0,void 0,function(){var r;return a(this,function(o){switch(o.label){case 0:return d(t),[4,g(t)];case 1:if(void 0===(r=o.sent()[e]))return[2,void 0];return[2,(0,l.decode)(r)]}})})};var k=function(e,t,r){return s(void 0,void 0,void 0,function(){var i,n,s,f,p,g,k,h,y,C,m,b,x,w,j;return a(this,function(a){switch(a.label){case 0:if(d(r),!v(r))return[3,3];if(i=r.req,n=r.res,s=r.cookies,f=u(r,["req","res","cookies"]),p=o({name:e,value:(0,l.stringify)(t)},f),i&&i.cookies.set(p),n&&n.cookies.set(p),!s)return[3,2];return[4,s()];case 1:a.sent().set(p),a.label=2;case 2:return[2];case 3:return g={},r&&(C=(y=r).req,m=y.res,b=u(y,["req","res"]),k=C,h=m,g=b),x=(0,c.serialize)(e,(0,l.stringify)(t),o({path:"/"},g)),h&&k&&(Array.isArray(w=h.getHeader("Set-Cookie"))||(w=w?[String(w)]:[]),h.setHeader("Set-Cookie",w.concat(x)),k&&k.cookies&&(j=k.cookies,""===t?delete j[e]:j[e]=(0,l.stringify)(t)),k&&k.headers&&k.headers.cookie&&(j=(0,c.parse)(k.headers.cookie),""===t?delete j[e]:j[e]=(0,l.stringify)(t),k.headers.cookie=Object.entries(j).reduce(function(e,t){return e.concat("".concat(t[0],"=").concat(t[1],";"))},""))),[2]}})})};r.setCookie=k,r.deleteCookie=function(e,t){return s(void 0,void 0,void 0,function(){return a(this,function(r){return d(t),[2,k(e,"",o(o({},t),{maxAge:-1}))]})})},r.hasCookie=function(e,t){return s(void 0,void 0,void 0,function(){return a(this,function(r){switch(r.label){case 0:if(d(t),!e)return[2,!1];return[4,g(t)];case 1:return[2,r.sent().hasOwnProperty(e)]}})})},n(e.r(36918),r)},14627,(e,t,r)=>{"use strict";var o=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},s=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.CookiesNextProvider=r.useReactiveCookiesNext=r.useReactiveHasCookie=r.useReactiveDeleteCookie=r.useReactiveSetCookie=r.useReactiveGetCookie=r.useReactiveGetCookies=r.useCookiesNext=r.useDeleteCookie=r.useGetCookie=r.useSetCookie=r.useHasCookie=r.useGetCookies=r.hasCookie=r.deleteCookie=r.setCookie=r.getCookie=r.getCookies=void 0;var a=n(e.r(51318)),u=n(e.r(18411));s(e.r(36918),r);var c=e.r(57996);r.getCookies=function(e){return(0,c.isClientSide)(e)?a.getCookies(e):u.getCookies(e)},r.getCookie=function(e,t){return(0,c.isClientSide)(t)?a.getCookie(e,t):u.getCookie(e,t)},r.setCookie=function(e,t,r){return(0,c.isClientSide)(r)?a.setCookie(e,t,r):u.setCookie(e,t,r)},r.deleteCookie=function(e,t){return(0,c.isClientSide)(t)?a.deleteCookie(e,t):u.deleteCookie(e,t)},r.hasCookie=function(e,t){return(0,c.isClientSide)(t)?a.hasCookie(e,t):u.hasCookie(e,t)};var l=e.r(51318);Object.defineProperty(r,"useGetCookies",{enumerable:!0,get:function(){return l.useGetCookies}}),Object.defineProperty(r,"useHasCookie",{enumerable:!0,get:function(){return l.useHasCookie}}),Object.defineProperty(r,"useSetCookie",{enumerable:!0,get:function(){return l.useSetCookie}}),Object.defineProperty(r,"useGetCookie",{enumerable:!0,get:function(){return l.useGetCookie}}),Object.defineProperty(r,"useDeleteCookie",{enumerable:!0,get:function(){return l.useDeleteCookie}}),Object.defineProperty(r,"useCookiesNext",{enumerable:!0,get:function(){return l.useCookiesNext}}),Object.defineProperty(r,"useReactiveGetCookies",{enumerable:!0,get:function(){return l.useReactiveGetCookies}}),Object.defineProperty(r,"useReactiveGetCookie",{enumerable:!0,get:function(){return l.useReactiveGetCookie}}),Object.defineProperty(r,"useReactiveSetCookie",{enumerable:!0,get:function(){return l.useReactiveSetCookie}}),Object.defineProperty(r,"useReactiveDeleteCookie",{enumerable:!0,get:function(){return l.useReactiveDeleteCookie}}),Object.defineProperty(r,"useReactiveHasCookie",{enumerable:!0,get:function(){return l.useReactiveHasCookie}}),Object.defineProperty(r,"useReactiveCookiesNext",{enumerable:!0,get:function(){return l.useReactiveCookiesNext}}),Object.defineProperty(r,"CookiesNextProvider",{enumerable:!0,get:function(){return l.CookiesNextProvider}})},54558,e=>{"use strict";var t=e.i(14627);let r="ip_creative_user_id",o={maxAge:2592e3,path:"/",sameSite:"lax"},i=()=>{let e=(0,t.getCookie)(r);return e?String(e):null};e.s(["clearUserId",0,()=>{(0,t.deleteCookie)(r)},"getUserId",0,i,"isAuthenticated",0,()=>!!i(),"setUserId",0,e=>{(0,t.setCookie)(r,e,o)}])},82935,29336,e=>{"use strict";var t=e.i(64807);let r=async(e,t={})=>{try{let r=await fetch(`/api/cloud/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e=await r.json();return{success:0,message:e.message||`HTTP 请求失败: ${r.status}`}}let o=await r.json();if(1!==o.success)return{success:0,message:o.message||"调用云函数失败"};return{success:1,...o}}catch(t){return console.error(`调用云函数 ${e} 失败:`,t),{success:0,message:t.message||`调用云函数 ${e} 失败`}}};e.s(["callCloudFunction",0,r],29336);var o=e.i(54558);let i=async e=>{try{let i=e||(0,o.getUserId)();if(!i)return{userTier:t.UserTier.FREE,sceneUsage:{date:new Date().toLocaleDateString(),count:0},memeUsage:{date:new Date().toLocaleDateString(),count:0}};let n=await r("user",{action:"getInfo",userId:i});if(1!==n.success){if("用户不存在"===n.message)return{userTier:t.UserTier.FREE,sceneUsage:{date:new Date().toLocaleDateString(),count:0},memeUsage:{date:new Date().toLocaleDateString(),count:0}};throw Error(n.message||"获取用户信息失败")}let s=n.data;return{userId:s.userId,phone:s.phone,userTier:s.userTier||t.UserTier.FREE,sceneUsage:s.sceneUsage||{date:new Date().toLocaleDateString(),count:0},memeUsage:s.memeUsage||{date:new Date().toLocaleDateString(),count:0}}}catch(e){return console.error("Get user info error:",e),{userTier:t.UserTier.FREE,sceneUsage:{date:new Date().toLocaleDateString(),count:0},memeUsage:{date:new Date().toLocaleDateString(),count:0}}}},n=async(e,t=1)=>{try{let o=await r("user",{action:"updateSceneUsage",userId:e,increment:t});if(1!==o.success)throw Error(o.message||"更新场景扩展使用次数失败");return o.data.sceneUsage}catch(e){throw console.error("Update scene usage error:",e),Error(e.message||"更新场景扩展使用次数失败")}},s=async(e,t=1)=>{try{let o=await r("user",{action:"updateMemeUsage",userId:e,increment:t});if(1!==o.success)throw Error(o.message||"更新表情包制作使用次数失败");return o.data.memeUsage}catch(e){throw console.error("Update meme usage error:",e),Error(e.message||"更新表情包制作使用次数失败")}};e.s(["getUserInfo",0,i,"updateMemeUsage",0,s,"updateSceneUsage",0,n],82935)},471,e=>{"use strict";var t=e.i(29336),r=e.i(54558);e.i(82935);let o=async(e,o)=>{try{let i=await (0,t.callCloudFunction)("auth",{action:"login",phone:e,password:o});if(console.log("result",i),1!==i.success)throw Error(i.message||"登录失败");let n=i.data;return(0,r.setUserId)(n.userId),{userId:n.userId,phone:n.phone,userTier:n.userTier}}catch(e){throw console.error("Login error:",e),Error(e.message||"登录失败")}},i=async()=>{(0,r.clearUserId)(),localStorage.removeItem("ip_creative_scene_usage"),localStorage.removeItem("ip_creative_meme_usage")};e.s(["login",0,o,"logout",0,i])},89954,e=>{"use strict";var t=e.i(1972),r=e.i(75305),o=e.i(30499),i=e.i(27718),n=e.i(57475);let s=(0,n.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),a=(0,n.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),u=(0,n.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c=(0,n.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var l=e.i(24569),d=e.i(11854),f=e.i(471),v=e.i(82935);function p(){let e=(0,o.useRouter)(),n=(0,l.useAppDispatch)(),[p,g]=(0,r.useState)(""),[k,h]=(0,r.useState)(""),[y,C]=(0,r.useState)(!1),[m,b]=(0,r.useState)(!1),[x,w]=(0,r.useState)(""),j=async t=>{t.preventDefault(),w(""),b(!0);try{if(!/^1[3-9]\d{9}$/.test(p)){w("请输入正确的手机号"),b(!1);return}if(k.length<6){w("密码至少6位"),b(!1);return}let t=await (0,f.login)(p,k),r=await (0,v.getUserInfo)(t.userId);n((0,d.setUserInfo)({userId:r.userId||t.userId,phone:t.phone,userTier:r.userTier})),n((0,d.setSceneUsage)(r.sceneUsage)),n((0,d.setMemeUsage)(r.memeUsage)),e.push("/")}catch(e){w(e.message||"登录失败")}finally{b(!1)}};return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-gradient-to-b from-violet-50 to-white pb-24 md:pt-16",children:[(0,t.jsxs)("header",{className:"bg-white/80 backdrop-blur-sm p-4 md:hidden sticky top-0 z-10 shadow-sm border-b border-gray-100 flex items-center",children:[(0,t.jsx)("button",{onClick:()=>e.back(),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,t.jsx)(i.ChevronLeft,{size:24,className:"text-gray-600"})}),(0,t.jsx)("h2",{className:"font-bold text-lg text-gray-800 ml-2",children:"登录"})]}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center p-6 md:p-12",children:(0,t.jsx)("div",{className:"w-full max-w-md",children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 md:p-10 space-y-6",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"欢迎使用"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"登录即注册，首次登录将自动创建账号"})]}),x&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm",children:x}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"手机号"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:(0,t.jsx)(s,{size:20})}),(0,t.jsx)("input",{type:"tel",value:p,onChange:e=>g(e.target.value),placeholder:"请输入手机号",className:"w-full pl-11 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-violet-500 focus:border-transparent outline-none transition-all",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"密码"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:(0,t.jsx)(a,{size:20})}),(0,t.jsx)("input",{type:y?"text":"password",value:k,onChange:e=>h(e.target.value),placeholder:"请输入密码（至少6位）",className:"w-full pl-11 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-violet-500 focus:border-transparent outline-none transition-all",required:!0,minLength:6}),(0,t.jsx)("button",{type:"button",onClick:()=>C(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:y?(0,t.jsx)(c,{size:20}):(0,t.jsx)(u,{size:20})})]})]}),(0,t.jsx)("button",{type:"submit",disabled:m,className:"w-full py-3 bg-violet-600 text-white rounded-xl font-semibold shadow-lg shadow-violet-200 hover:bg-violet-700 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:m?"处理中...":"登录"})]})]})})})]})}e.s(["default",()=>p],89954)},39761,e=>{e.v(e=>Promise.resolve().then(()=>e(54558)))}]);