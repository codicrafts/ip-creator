{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/lib/date-utils.ts"],"sourcesContent":["/**\n * 日期工具函数\n * 统一日期格式，避免不同环境下的格式差异\n */\n\n/**\n * 获取今天的日期字符串（格式：YYYY-MM-DD）\n */\nexport function getTodayDateString(): string {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = String(today.getMonth() + 1).padStart(2, '0');\n  const day = String(today.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n/**\n * 将日期转换为统一格式（YYYY-MM-DD）\n * 如果输入是字符串，尝试解析并转换\n */\nexport function normalizeDateString(date: string | Date): string {\n  if (date instanceof Date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n  \n  // 如果是字符串，尝试解析\n  const dateObj = new Date(date);\n  if (!isNaN(dateObj.getTime())) {\n    const year = dateObj.getFullYear();\n    const month = String(dateObj.getMonth() + 1).padStart(2, '0');\n    const day = String(dateObj.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n  \n  // 如果已经是 YYYY-MM-DD 格式，直接返回\n  if (/^\\d{4}-\\d{2}-\\d{2}$/.test(date)) {\n    return date;\n  }\n  \n  // 尝试解析其他格式（如 M/D/YYYY 或 YYYY/M/D）\n  const parts = date.split(/[\\/\\-]/);\n  if (parts.length === 3) {\n    let year: string, month: string, day: string;\n    \n    // 判断格式：如果第一部分是4位数，则是 YYYY/M/D\n    if (parts[0].length === 4) {\n      year = parts[0];\n      month = parts[1].padStart(2, '0');\n      day = parts[2].padStart(2, '0');\n    } else {\n      // 否则是 M/D/YYYY\n      month = parts[0].padStart(2, '0');\n      day = parts[1].padStart(2, '0');\n      year = parts[2];\n    }\n    \n    return `${year}-${month}-${day}`;\n  }\n  \n  // 如果无法解析，返回原字符串\n  return date;\n}\n\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED;;CAEC;;;;;;AACM,SAAS;IACd,MAAM,QAAQ,IAAI;IAClB,MAAM,OAAO,MAAM,WAAW;IAC9B,MAAM,QAAQ,OAAO,MAAM,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;IACvD,MAAM,MAAM,OAAO,MAAM,OAAO,IAAI,QAAQ,CAAC,GAAG;IAChD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;AAClC;AAMO,SAAS,oBAAoB,IAAmB;IACrD,IAAI,gBAAgB,MAAM;QACxB,MAAM,OAAO,KAAK,WAAW;QAC7B,MAAM,QAAQ,OAAO,KAAK,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;QACtD,MAAM,MAAM,OAAO,KAAK,OAAO,IAAI,QAAQ,CAAC,GAAG;QAC/C,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;IAClC;IAEA,cAAc;IACd,MAAM,UAAU,IAAI,KAAK;IACzB,IAAI,CAAC,MAAM,QAAQ,OAAO,KAAK;QAC7B,MAAM,OAAO,QAAQ,WAAW;QAChC,MAAM,QAAQ,OAAO,QAAQ,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;QACzD,MAAM,MAAM,OAAO,QAAQ,OAAO,IAAI,QAAQ,CAAC,GAAG;QAClD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;IAClC;IAEA,2BAA2B;IAC3B,IAAI,sBAAsB,IAAI,CAAC,OAAO;QACpC,OAAO;IACT;IAEA,kCAAkC;IAClC,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,IAAI,MAAc,OAAe;QAEjC,8BAA8B;QAC9B,IAAI,KAAK,CAAC,EAAE,CAAC,MAAM,KAAK,GAAG;YACzB,OAAO,KAAK,CAAC,EAAE;YACf,QAAQ,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;YAC7B,MAAM,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;QAC7B,OAAO;YACL,eAAe;YACf,QAAQ,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;YAC7B,MAAM,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;YAC3B,OAAO,KAAK,CAAC,EAAE;QACjB;QAEA,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;IAClC;IAEA,gBAAgB;IAChB,OAAO;AACT"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/lib/db.ts"],"sourcesContent":["/**\n * 数据库操作共享函数\n * 供 SSR 和 API 路由使用\n */\n\nimport { UserTier } from '@/types';\nimport { getTodayDateString, normalizeDateString } from '@/lib/date-utils';\n\n// 动态导入 wx-server-sdk（CommonJS 模块）\nlet cloudInstance: any;\nlet dbInstance: any;\n\nexport async function getCloudDB() {\n  if (!cloudInstance) {\n    // 使用动态导入处理 CommonJS 模块\n    const wxServerSDK = await import(\"wx-server-sdk\");\n    cloudInstance = (wxServerSDK as any).default || wxServerSDK;\n\n    // 配置云开发（需要 secretId 和 secretKey）\n    const initConfig: any = {\n      env: \"cloudbase-5gqcz0ab010d3288\",\n    };\n\n    // 从环境变量获取腾讯云凭证（如果配置了）\n    const secretId = process.env.TENCENT_CLOUD_SECRET_ID;\n    const secretKey = process.env.TENCENT_CLOUD_SECRET_KEY;\n\n    if (secretId && secretKey) {\n      initConfig.secretId = secretId;\n      initConfig.secretKey = secretKey;\n    }\n\n    cloudInstance.init(initConfig);\n    dbInstance = cloudInstance.database();\n  }\n  return { cloud: cloudInstance, db: dbInstance };\n}\n\n/**\n * 获取用户信息（返回普通对象，不包含 NextResponse）\n */\nexport async function getUserInfoFromDB(userId: string) {\n  try {\n    const { db } = await getCloudDB();\n    const today = getTodayDateString();\n\n    const result = await db.collection(\"users\").doc(userId).get();\n\n    if (!result.data) {\n      return null;\n    }\n\n    const user = result.data;\n\n    // 检查是否需要重置每日使用量\n    let sceneUsage = user.sceneUsage || { date: today, count: 0 };\n    let memeUsage = user.memeUsage || { date: today, count: 0 };\n\n    // 统一日期格式后比较\n    const sceneUsageDate = normalizeDateString(sceneUsage.date);\n    const memeUsageDate = normalizeDateString(memeUsage.date);\n\n    if (sceneUsageDate !== today) {\n      sceneUsage = { date: today, count: 0 };\n    } else {\n      // 确保日期格式统一\n      sceneUsage = { ...sceneUsage, date: today };\n    }\n    if (memeUsageDate !== today) {\n      memeUsage = { date: today, count: 0 };\n    } else {\n      // 确保日期格式统一\n      memeUsage = { ...memeUsage, date: today };\n    }\n\n    return {\n      userId: user._id,\n      phone: user.phone,\n      userTier: (user.userTier || \"FREE\") as UserTier,\n      sceneUsage: sceneUsage,\n      memeUsage: memeUsage,\n    };\n  } catch (error) {\n    console.error(\"Get user info from DB error:\", error);\n    return null;\n  }\n}\n\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAGD;;AAEA,kCAAkC;AAClC,IAAI;AACJ,IAAI;AAEG,eAAe;IACpB,IAAI,CAAC,eAAe;QAClB,uBAAuB;QACvB,MAAM,cAAc;QACpB,gBAAgB,AAAC,YAAoB,OAAO,IAAI;QAEhD,iCAAiC;QACjC,MAAM,aAAkB;YACtB,KAAK;QACP;QAEA,sBAAsB;QACtB,MAAM,WAAW,QAAQ,GAAG,CAAC,uBAAuB;QACpD,MAAM,YAAY,QAAQ,GAAG,CAAC,wBAAwB;QAEtD,IAAI,YAAY,WAAW;YACzB,WAAW,QAAQ,GAAG;YACtB,WAAW,SAAS,GAAG;QACzB;QAEA,cAAc,IAAI,CAAC;QACnB,aAAa,cAAc,QAAQ;IACrC;IACA,OAAO;QAAE,OAAO;QAAe,IAAI;IAAW;AAChD;AAKO,eAAe,kBAAkB,MAAc;IACpD,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,QAAQ,IAAA,4IAAkB;QAEhC,MAAM,SAAS,MAAM,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC,QAAQ,GAAG;QAE3D,IAAI,CAAC,OAAO,IAAI,EAAE;YAChB,OAAO;QACT;QAEA,MAAM,OAAO,OAAO,IAAI;QAExB,gBAAgB;QAChB,IAAI,aAAa,KAAK,UAAU,IAAI;YAAE,MAAM;YAAO,OAAO;QAAE;QAC5D,IAAI,YAAY,KAAK,SAAS,IAAI;YAAE,MAAM;YAAO,OAAO;QAAE;QAE1D,YAAY;QACZ,MAAM,iBAAiB,IAAA,6IAAmB,EAAC,WAAW,IAAI;QAC1D,MAAM,gBAAgB,IAAA,6IAAmB,EAAC,UAAU,IAAI;QAExD,IAAI,mBAAmB,OAAO;YAC5B,aAAa;gBAAE,MAAM;gBAAO,OAAO;YAAE;QACvC,OAAO;YACL,WAAW;YACX,aAAa;gBAAE,GAAG,UAAU;gBAAE,MAAM;YAAM;QAC5C;QACA,IAAI,kBAAkB,OAAO;YAC3B,YAAY;gBAAE,MAAM;gBAAO,OAAO;YAAE;QACtC,OAAO;YACL,WAAW;YACX,YAAY;gBAAE,GAAG,SAAS;gBAAE,MAAM;YAAM;QAC1C;QAEA,OAAO;YACL,QAAQ,KAAK,GAAG;YAChB,OAAO,KAAK,KAAK;YACjB,UAAW,KAAK,QAAQ,IAAI;YAC5B,YAAY;YACZ,WAAW;QACb;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;IACT;AACF"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/app/api/cloud/%5BfunctionName%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { getCloudDB } from \"@/lib/db\";\nimport { getTodayDateString, normalizeDateString } from \"@/lib/date-utils\";\n\n/**\n * 调用云函数（服务端）\n * POST /api/cloud/[functionName]\n */\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: Promise<{ functionName: string }> }\n) {\n  try {\n    // 初始化云开发并获取数据库实例\n    const { db } = await getCloudDB();\n\n    // Next.js 15+ 中 params 是 Promise\n    const resolvedParams = await params;\n    const functionName = resolvedParams.functionName;\n    const body = await request.json();\n\n    // 根据云函数名称调用对应的云函数\n    if (functionName === \"auth\") {\n      return await handleAuth(body, db);\n    } else if (functionName === \"user\") {\n      return await handleUser(body, db);\n    } else if (functionName === \"history\") {\n      return await handleHistory(body, db);\n    } else {\n      return NextResponse.json(\n        { success: 0, message: \"未知的云函数\" },\n        { status: 400 }\n      );\n    }\n  } catch (error: any) {\n    console.error(\"调用云函数失败:\", error);\n    return NextResponse.json(\n      { success: 0, message: error.message || \"调用云函数失败\" },\n      { status: 500 }\n    );\n  }\n}\n\n/**\n * 处理 auth 云函数\n */\nasync function handleAuth(body: any, db: any) {\n  const { action, phone, password } = body;\n\n  if (action === \"login\") {\n    // 登录即注册：先查找用户，不存在则创建\n    const result = await db\n      .collection(\"users\")\n      .where({\n        phone: phone,\n      })\n      .get();\n\n    let user;\n\n    if (result.data.length === 0) {\n      // 用户不存在，自动创建新用户\n      const today = getTodayDateString();\n      const newUser = {\n        phone: phone,\n        password: password, // 实际生产环境应该加密\n        userTier: \"FREE\",\n        sceneUsage: { date: today, count: 0 },\n        memeUsage: { date: today, count: 0 },\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      };\n\n      const addResult = await db.collection(\"users\").add({\n        data: newUser,\n      });\n\n      user = {\n        _id: addResult._id,\n        ...newUser,\n      };\n    } else {\n      // 用户存在，验证密码\n      user = result.data[0];\n      if (user.password !== password) {\n        return NextResponse.json({\n          success: 0,\n          message: \"密码错误\",\n        });\n      }\n    }\n\n    return NextResponse.json({\n      success: 1,\n      data: {\n        userId: user._id,\n        phone: user.phone,\n        userTier: user.userTier || \"FREE\",\n        sceneUsage: user.sceneUsage || {\n          date: new Date().toLocaleDateString(),\n          count: 0,\n        },\n        memeUsage: user.memeUsage || {\n          date: new Date().toLocaleDateString(),\n          count: 0,\n        },\n      },\n    });\n  } else if (action === \"register\") {\n    // 注册\n    // 检查手机号是否已存在\n    const existResult = await db\n      .collection(\"users\")\n      .where({\n        phone: phone,\n      })\n      .get();\n\n    if (existResult.data.length > 0) {\n      return NextResponse.json({\n        success: 0,\n        message: \"该手机号已注册\",\n      });\n    }\n\n    // 创建新用户\n      const today = getTodayDateString();\n    const newUser = {\n      phone: phone,\n      password: password, // 实际生产环境应该加密\n      userTier: \"FREE\",\n      sceneUsage: { date: today, count: 0 },\n      memeUsage: { date: today, count: 0 },\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    const addResult = await db.collection(\"users\").add({\n      data: newUser,\n    });\n\n    return NextResponse.json({\n      success: 1,\n      data: {\n        userId: addResult._id,\n        phone: newUser.phone,\n        userTier: newUser.userTier,\n        sceneUsage: newUser.sceneUsage,\n        memeUsage: newUser.memeUsage,\n      },\n    });\n  } else {\n    return NextResponse.json({\n      success: 0,\n      message: \"未知操作\",\n    });\n  }\n}\n\n/**\n * 处理 user 云函数\n */\nasync function handleUser(body: any, db: any) {\n  const { action, userId, increment, userTier } = body;\n\n  if (!userId) {\n    return NextResponse.json({\n      success: 0,\n      message: \"用户ID不能为空\",\n    });\n  }\n\n      const today = getTodayDateString();\n\n  if (action === \"getInfo\") {\n    // 获取用户信息\n    const result = await db.collection(\"users\").doc(userId).get();\n\n    if (!result.data) {\n      return NextResponse.json({\n        success: 0,\n        message: \"用户不存在\",\n      });\n    }\n\n    const user = result.data;\n\n    // 检查是否需要重置每日使用量\n    let sceneUsage = user.sceneUsage || { date: today, count: 0 };\n    let memeUsage = user.memeUsage || { date: today, count: 0 };\n\n    // 统一日期格式后比较\n    const sceneUsageDate = normalizeDateString(sceneUsage.date);\n    const memeUsageDate = normalizeDateString(memeUsage.date);\n\n    if (sceneUsageDate !== today) {\n      sceneUsage = { date: today, count: 0 };\n    } else {\n      // 确保日期格式统一\n      sceneUsage = { ...sceneUsage, date: today };\n    }\n    if (memeUsageDate !== today) {\n      memeUsage = { date: today, count: 0 };\n    } else {\n      // 确保日期格式统一\n      memeUsage = { ...memeUsage, date: today };\n    }\n\n    return NextResponse.json({\n      success: 1,\n      data: {\n        userId: user._id,\n        phone: user.phone,\n        userTier: user.userTier || \"FREE\",\n        sceneUsage: sceneUsage,\n        memeUsage: memeUsage,\n      },\n    });\n  } else if (action === \"updateSceneUsage\") {\n    // 更新场景扩展使用次数\n    const userResult = await db.collection(\"users\").doc(userId).get();\n\n    if (!userResult.data) {\n      return NextResponse.json({\n        success: 0,\n        message: \"用户不存在\",\n      });\n    }\n\n    const user = userResult.data;\n    let sceneUsage = user.sceneUsage || { date: today, count: 0 };\n\n    // 统一日期格式后比较\n    const sceneUsageDate = normalizeDateString(sceneUsage.date);\n\n    // 如果日期不同，重置计数\n    if (sceneUsageDate !== today) {\n      sceneUsage = { date: today, count: increment || 1 };\n    } else {\n      sceneUsage.count = (sceneUsage.count || 0) + (increment || 1);\n      sceneUsage.date = today; // 确保日期格式统一\n    }\n\n    await db\n      .collection(\"users\")\n      .doc(userId)\n      .update({\n        data: {\n          sceneUsage: sceneUsage,\n          updatedAt: new Date(),\n        },\n      });\n\n    return NextResponse.json({\n      success: 1,\n      data: {\n        sceneUsage: sceneUsage,\n      },\n    });\n  } else if (action === \"updateMemeUsage\") {\n    // 更新表情包制作使用次数\n    const userResult = await db.collection(\"users\").doc(userId).get();\n\n    if (!userResult.data) {\n      return NextResponse.json({\n        success: 0,\n        message: \"用户不存在\",\n      });\n    }\n\n    const user = userResult.data;\n    let memeUsage = user.memeUsage || { date: today, count: 0 };\n\n    // 统一日期格式后比较\n    const memeUsageDate = normalizeDateString(memeUsage.date);\n\n    // 如果日期不同，重置计数\n    if (memeUsageDate !== today) {\n      memeUsage = { date: today, count: increment || 1 };\n    } else {\n      memeUsage.count = (memeUsage.count || 0) + (increment || 1);\n      memeUsage.date = today; // 确保日期格式统一\n    }\n\n    await db\n      .collection(\"users\")\n      .doc(userId)\n      .update({\n        data: {\n          memeUsage: memeUsage,\n          updatedAt: new Date(),\n        },\n      });\n\n    return NextResponse.json({\n      success: 1,\n      data: {\n        memeUsage: memeUsage,\n      },\n    });\n  } else if (action === \"updateTier\") {\n    // 更新用户会员等级\n    await db\n      .collection(\"users\")\n      .doc(userId)\n      .update({\n        data: {\n          userTier: userTier,\n          updatedAt: new Date(),\n        },\n      });\n\n    const userResult = await db.collection(\"users\").doc(userId).get();\n\n    const user = userResult.data;\n\n    return NextResponse.json({\n      success: 1,\n      data: {\n        userId: user._id,\n        phone: user.phone,\n        userTier: user.userTier,\n        sceneUsage: user.sceneUsage || { date: today, count: 0 },\n        memeUsage: user.memeUsage || { date: today, count: 0 },\n      },\n    });\n  } else {\n    return NextResponse.json({\n      success: 0,\n      message: \"未知操作\",\n    });\n  }\n}\n\n/**\n * 处理 history 云函数\n */\nasync function handleHistory(body: any, db: any) {\n  const { action, userId, type, url, prompt, style, historyId, limit } = body;\n\n  if (action === \"save\") {\n    // 保存历史记录\n    const historyItem = {\n      userId: userId || null,\n      type: type, // 'scene' 或 'meme'\n      url: url,\n      prompt: prompt,\n      style: style || null,\n      timestamp: Date.now(),\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    const addResult = await db.collection(\"history\").add({\n      data: historyItem,\n    });\n\n    return NextResponse.json({\n      success: 1,\n      data: {\n        id: addResult._id,\n        userId: historyItem.userId,\n        type: historyItem.type,\n        url: historyItem.url,\n        prompt: historyItem.prompt,\n        style: historyItem.style,\n        timestamp: historyItem.timestamp,\n      },\n    });\n  } else if (action === \"getList\") {\n    // 获取历史记录列表\n    if (!userId) {\n      return NextResponse.json({\n        success: 0,\n        message: \"用户ID不能为空\",\n      });\n    }\n\n    const query = db.collection(\"history\").where({\n      userId: userId,\n    }).orderBy(\"timestamp\", \"desc\").limit(limit || 50);\n\n    const result = await query.get();\n    const historyList = result.data.map((item: any) => ({\n      id: item._id,\n      userId: item.userId,\n      type: item.type,\n      url: item.url,\n      prompt: item.prompt,\n      style: item.style,\n      timestamp: item.timestamp,\n    }));\n\n    return NextResponse.json({\n      success: 1,\n      data: historyList,\n    });\n  } else if (action === \"delete\") {\n    // 删除历史记录\n    if (!userId || !historyId) {\n      return NextResponse.json({\n        success: 0,\n        message: \"用户ID和历史记录ID不能为空\",\n      });\n    }\n\n    // 验证历史记录是否属于该用户\n    const historyResult = await db.collection(\"history\").doc(historyId).get();\n    const historyItem = historyResult.data;\n\n    if (!historyItem) {\n      return NextResponse.json({\n        success: 0,\n        message: \"历史记录不存在\",\n      });\n    }\n\n    if (historyItem.userId !== userId) {\n      return NextResponse.json({\n        success: 0,\n        message: \"无权删除该历史记录\",\n      });\n    }\n\n    await db.collection(\"history\").doc(historyId).remove();\n\n    return NextResponse.json({\n      success: 1,\n      message: \"删除成功\",\n    });\n  } else {\n    return NextResponse.json({\n      success: 0,\n      message: \"未知操作\",\n    });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAMO,eAAe,KACpB,OAAoB,EACpB,EAAE,MAAM,EAAiD;IAEzD,IAAI;QACF,iBAAiB;QACjB,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,IAAA,yHAAU;QAE/B,iCAAiC;QACjC,MAAM,iBAAiB,MAAM;QAC7B,MAAM,eAAe,eAAe,YAAY;QAChD,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,kBAAkB;QAClB,IAAI,iBAAiB,QAAQ;YAC3B,OAAO,MAAM,WAAW,MAAM;QAChC,OAAO,IAAI,iBAAiB,QAAQ;YAClC,OAAO,MAAM,WAAW,MAAM;QAChC,OAAO,IAAI,iBAAiB,WAAW;YACrC,OAAO,MAAM,cAAc,MAAM;QACnC,OAAO;YACL,OAAO,+QAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAG,SAAS;YAAS,GAChC;gBAAE,QAAQ;YAAI;QAElB;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,YAAY;QAC1B,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAG,SAAS,MAAM,OAAO,IAAI;QAAU,GAClD;YAAE,QAAQ;QAAI;IAElB;AACF;AAEA;;CAEC,GACD,eAAe,WAAW,IAAS,EAAE,EAAO;IAC1C,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG;IAEpC,IAAI,WAAW,SAAS;QACtB,qBAAqB;QACrB,MAAM,SAAS,MAAM,GAClB,UAAU,CAAC,SACX,KAAK,CAAC;YACL,OAAO;QACT,GACC,GAAG;QAEN,IAAI;QAEJ,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,GAAG;YAC5B,gBAAgB;YAChB,MAAM,QAAQ,IAAA,4IAAkB;YAChC,MAAM,UAAU;gBACd,OAAO;gBACP,UAAU;gBACV,UAAU;gBACV,YAAY;oBAAE,MAAM;oBAAO,OAAO;gBAAE;gBACpC,WAAW;oBAAE,MAAM;oBAAO,OAAO;gBAAE;gBACnC,WAAW,IAAI;gBACf,WAAW,IAAI;YACjB;YAEA,MAAM,YAAY,MAAM,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC;gBACjD,MAAM;YACR;YAEA,OAAO;gBACL,KAAK,UAAU,GAAG;gBAClB,GAAG,OAAO;YACZ;QACF,OAAO;YACL,YAAY;YACZ,OAAO,OAAO,IAAI,CAAC,EAAE;YACrB,IAAI,KAAK,QAAQ,KAAK,UAAU;gBAC9B,OAAO,+QAAY,CAAC,IAAI,CAAC;oBACvB,SAAS;oBACT,SAAS;gBACX;YACF;QACF;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,QAAQ,KAAK,GAAG;gBAChB,OAAO,KAAK,KAAK;gBACjB,UAAU,KAAK,QAAQ,IAAI;gBAC3B,YAAY,KAAK,UAAU,IAAI;oBAC7B,MAAM,IAAI,OAAO,kBAAkB;oBACnC,OAAO;gBACT;gBACA,WAAW,KAAK,SAAS,IAAI;oBAC3B,MAAM,IAAI,OAAO,kBAAkB;oBACnC,OAAO;gBACT;YACF;QACF;IACF,OAAO,IAAI,WAAW,YAAY;QAChC,KAAK;QACL,aAAa;QACb,MAAM,cAAc,MAAM,GACvB,UAAU,CAAC,SACX,KAAK,CAAC;YACL,OAAO;QACT,GACC,GAAG;QAEN,IAAI,YAAY,IAAI,CAAC,MAAM,GAAG,GAAG;YAC/B,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,QAAQ;QACN,MAAM,QAAQ,IAAA,4IAAkB;QAClC,MAAM,UAAU;YACd,OAAO;YACP,UAAU;YACV,UAAU;YACV,YAAY;gBAAE,MAAM;gBAAO,OAAO;YAAE;YACpC,WAAW;gBAAE,MAAM;gBAAO,OAAO;YAAE;YACnC,WAAW,IAAI;YACf,WAAW,IAAI;QACjB;QAEA,MAAM,YAAY,MAAM,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC;YACjD,MAAM;QACR;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,QAAQ,UAAU,GAAG;gBACrB,OAAO,QAAQ,KAAK;gBACpB,UAAU,QAAQ,QAAQ;gBAC1B,YAAY,QAAQ,UAAU;gBAC9B,WAAW,QAAQ,SAAS;YAC9B;QACF;IACF,OAAO;QACL,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF;AACF;AAEA;;CAEC,GACD,eAAe,WAAW,IAAS,EAAE,EAAO;IAC1C,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG;IAEhD,IAAI,CAAC,QAAQ;QACX,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF;IAEI,MAAM,QAAQ,IAAA,4IAAkB;IAEpC,IAAI,WAAW,WAAW;QACxB,SAAS;QACT,MAAM,SAAS,MAAM,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC,QAAQ,GAAG;QAE3D,IAAI,CAAC,OAAO,IAAI,EAAE;YAChB,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,OAAO,OAAO,IAAI;QAExB,gBAAgB;QAChB,IAAI,aAAa,KAAK,UAAU,IAAI;YAAE,MAAM;YAAO,OAAO;QAAE;QAC5D,IAAI,YAAY,KAAK,SAAS,IAAI;YAAE,MAAM;YAAO,OAAO;QAAE;QAE1D,YAAY;QACZ,MAAM,iBAAiB,IAAA,6IAAmB,EAAC,WAAW,IAAI;QAC1D,MAAM,gBAAgB,IAAA,6IAAmB,EAAC,UAAU,IAAI;QAExD,IAAI,mBAAmB,OAAO;YAC5B,aAAa;gBAAE,MAAM;gBAAO,OAAO;YAAE;QACvC,OAAO;YACL,WAAW;YACX,aAAa;gBAAE,GAAG,UAAU;gBAAE,MAAM;YAAM;QAC5C;QACA,IAAI,kBAAkB,OAAO;YAC3B,YAAY;gBAAE,MAAM;gBAAO,OAAO;YAAE;QACtC,OAAO;YACL,WAAW;YACX,YAAY;gBAAE,GAAG,SAAS;gBAAE,MAAM;YAAM;QAC1C;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,QAAQ,KAAK,GAAG;gBAChB,OAAO,KAAK,KAAK;gBACjB,UAAU,KAAK,QAAQ,IAAI;gBAC3B,YAAY;gBACZ,WAAW;YACb;QACF;IACF,OAAO,IAAI,WAAW,oBAAoB;QACxC,aAAa;QACb,MAAM,aAAa,MAAM,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC,QAAQ,GAAG;QAE/D,IAAI,CAAC,WAAW,IAAI,EAAE;YACpB,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,OAAO,WAAW,IAAI;QAC5B,IAAI,aAAa,KAAK,UAAU,IAAI;YAAE,MAAM;YAAO,OAAO;QAAE;QAE5D,YAAY;QACZ,MAAM,iBAAiB,IAAA,6IAAmB,EAAC,WAAW,IAAI;QAE1D,cAAc;QACd,IAAI,mBAAmB,OAAO;YAC5B,aAAa;gBAAE,MAAM;gBAAO,OAAO,aAAa;YAAE;QACpD,OAAO;YACL,WAAW,KAAK,GAAG,CAAC,WAAW,KAAK,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;YAC5D,WAAW,IAAI,GAAG,OAAO,WAAW;QACtC;QAEA,MAAM,GACH,UAAU,CAAC,SACX,GAAG,CAAC,QACJ,MAAM,CAAC;YACN,MAAM;gBACJ,YAAY;gBACZ,WAAW,IAAI;YACjB;QACF;QAEF,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,YAAY;YACd;QACF;IACF,OAAO,IAAI,WAAW,mBAAmB;QACvC,cAAc;QACd,MAAM,aAAa,MAAM,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC,QAAQ,GAAG;QAE/D,IAAI,CAAC,WAAW,IAAI,EAAE;YACpB,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,OAAO,WAAW,IAAI;QAC5B,IAAI,YAAY,KAAK,SAAS,IAAI;YAAE,MAAM;YAAO,OAAO;QAAE;QAE1D,YAAY;QACZ,MAAM,gBAAgB,IAAA,6IAAmB,EAAC,UAAU,IAAI;QAExD,cAAc;QACd,IAAI,kBAAkB,OAAO;YAC3B,YAAY;gBAAE,MAAM;gBAAO,OAAO,aAAa;YAAE;QACnD,OAAO;YACL,UAAU,KAAK,GAAG,CAAC,UAAU,KAAK,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;YAC1D,UAAU,IAAI,GAAG,OAAO,WAAW;QACrC;QAEA,MAAM,GACH,UAAU,CAAC,SACX,GAAG,CAAC,QACJ,MAAM,CAAC;YACN,MAAM;gBACJ,WAAW;gBACX,WAAW,IAAI;YACjB;QACF;QAEF,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,WAAW;YACb;QACF;IACF,OAAO,IAAI,WAAW,cAAc;QAClC,WAAW;QACX,MAAM,GACH,UAAU,CAAC,SACX,GAAG,CAAC,QACJ,MAAM,CAAC;YACN,MAAM;gBACJ,UAAU;gBACV,WAAW,IAAI;YACjB;QACF;QAEF,MAAM,aAAa,MAAM,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC,QAAQ,GAAG;QAE/D,MAAM,OAAO,WAAW,IAAI;QAE5B,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,QAAQ,KAAK,GAAG;gBAChB,OAAO,KAAK,KAAK;gBACjB,UAAU,KAAK,QAAQ;gBACvB,YAAY,KAAK,UAAU,IAAI;oBAAE,MAAM;oBAAO,OAAO;gBAAE;gBACvD,WAAW,KAAK,SAAS,IAAI;oBAAE,MAAM;oBAAO,OAAO;gBAAE;YACvD;QACF;IACF,OAAO;QACL,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF;AACF;AAEA;;CAEC,GACD,eAAe,cAAc,IAAS,EAAE,EAAO;IAC7C,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG;IAEvE,IAAI,WAAW,QAAQ;QACrB,SAAS;QACT,MAAM,cAAc;YAClB,QAAQ,UAAU;YAClB,MAAM;YACN,KAAK;YACL,QAAQ;YACR,OAAO,SAAS;YAChB,WAAW,KAAK,GAAG;YACnB,WAAW,IAAI;YACf,WAAW,IAAI;QACjB;QAEA,MAAM,YAAY,MAAM,GAAG,UAAU,CAAC,WAAW,GAAG,CAAC;YACnD,MAAM;QACR;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,IAAI,UAAU,GAAG;gBACjB,QAAQ,YAAY,MAAM;gBAC1B,MAAM,YAAY,IAAI;gBACtB,KAAK,YAAY,GAAG;gBACpB,QAAQ,YAAY,MAAM;gBAC1B,OAAO,YAAY,KAAK;gBACxB,WAAW,YAAY,SAAS;YAClC;QACF;IACF,OAAO,IAAI,WAAW,WAAW;QAC/B,WAAW;QACX,IAAI,CAAC,QAAQ;YACX,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,QAAQ,GAAG,UAAU,CAAC,WAAW,KAAK,CAAC;YAC3C,QAAQ;QACV,GAAG,OAAO,CAAC,aAAa,QAAQ,KAAK,CAAC,SAAS;QAE/C,MAAM,SAAS,MAAM,MAAM,GAAG;QAC9B,MAAM,cAAc,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,OAAc,CAAC;gBAClD,IAAI,KAAK,GAAG;gBACZ,QAAQ,KAAK,MAAM;gBACnB,MAAM,KAAK,IAAI;gBACf,KAAK,KAAK,GAAG;gBACb,QAAQ,KAAK,MAAM;gBACnB,OAAO,KAAK,KAAK;gBACjB,WAAW,KAAK,SAAS;YAC3B,CAAC;QAED,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;QACR;IACF,OAAO,IAAI,WAAW,UAAU;QAC9B,SAAS;QACT,IAAI,CAAC,UAAU,CAAC,WAAW;YACzB,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,gBAAgB;QAChB,MAAM,gBAAgB,MAAM,GAAG,UAAU,CAAC,WAAW,GAAG,CAAC,WAAW,GAAG;QACvE,MAAM,cAAc,cAAc,IAAI;QAEtC,IAAI,CAAC,aAAa;YAChB,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,IAAI,YAAY,MAAM,KAAK,QAAQ;YACjC,OAAO,+QAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,GAAG,UAAU,CAAC,WAAW,GAAG,CAAC,WAAW,MAAM;QAEpD,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,OAAO;QACL,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF;AACF"}}]
}