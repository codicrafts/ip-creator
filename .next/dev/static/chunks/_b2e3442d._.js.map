{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/types.ts"],"sourcesContent":["export enum AppView {\n  HOME = 'HOME',\n  UPLOAD = 'UPLOAD',\n  EDIT = 'EDIT',\n  RESULT = 'RESULT',\n  PROFILE = 'PROFILE',\n  MEME_EDITOR = 'MEME_EDITOR'\n}\n\nexport interface GeneratedImage {\n  id: string; // Added unique ID\n  url: string;\n  timestamp: number;\n  prompt: string;\n  style?: string; // Optional style info\n}\n\nexport enum LoadingState {\n  IDLE = 'IDLE',\n  UPLOADING = 'UPLOADING',\n  GENERATING = 'GENERATING',\n  ERROR = 'ERROR',\n  SUCCESS = 'SUCCESS'\n}\n\nexport enum UserTier {\n  FREE = 'FREE',\n  PREMIUM = 'PREMIUM'\n}\n\nexport interface DailyUsage {\n  date: string; // YYYY-MM-DD\n  count: number;\n}\n\nexport enum AnimationType {\n  NONE = 'none',\n  SHAKE = 'shake',\n  PULSE = 'pulse',\n  ZOOM = 'zoom',\n  SPIN = 'spin'\n}\n\nexport interface MemeDraft {\n  id: string;\n  sourceUrl: string;\n  generatedUrl: string | null;\n  text: string; // The text overlay\n  moodPrompt: string; // e.g., \"laughing out loud\"\n  status: 'pending' | 'generating' | 'done' | 'error';\n  animation: AnimationType;\n}\n\n// Payment Types\nexport enum PaymentMethod {\n  WECHAT = 'WECHAT',\n  ALIPAY = 'ALIPAY'\n}\n\nexport enum PaymentStatus {\n  PENDING = 'PENDING',\n  SUCCESS = 'SUCCESS',\n  FAILED = 'FAILED',\n  CANCELLED = 'CANCELLED'\n}\n\nexport interface PaymentOrder {\n  orderId: string;\n  amount: number; // 金额（分）\n  productName: string;\n  productDesc?: string;\n  paymentMethod: PaymentMethod;\n  status: PaymentStatus;\n  createdAt: number;\n  paidAt?: number;\n}\n\nexport interface CreateOrderRequest {\n  amount: number; // 金额（分）\n  productName: string;\n  productDesc?: string;\n  paymentMethod: PaymentMethod;\n  userId?: string;\n}\n\nexport interface CreateOrderResponse {\n  orderId: string;\n  paymentParams: WechatPaymentParams | AlipayPaymentParams;\n}\n\n// 微信支付参数\nexport interface WechatPaymentParams {\n  appId: string;\n  timeStamp: string;\n  nonceStr: string;\n  package: string; // prepay_id=xxx\n  signType: string;\n  paySign: string;\n}\n\n// 支付宝支付参数\nexport interface AlipayPaymentParams {\n  orderString: string; // 支付宝订单字符串\n}"],"names":[],"mappings":";;;;;;;;;;;;;;AAAO,IAAA,AAAK,iCAAA;;;;;;;WAAA;;AAiBL,IAAA,AAAK,sCAAA;;;;;;WAAA;;AAQL,IAAA,AAAK,kCAAA;;;WAAA;;AAUL,IAAA,AAAK,uCAAA;;;;;;WAAA;;AAmBL,IAAA,AAAK,uCAAA;;;WAAA;;AAKL,IAAA,AAAK,uCAAA;;;;;WAAA"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/store/slices/appSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { AppView, LoadingState } from '@/types';\n\ninterface AppState {\n  currentView: AppView;\n  loadingState: LoadingState;\n  errorMsg: string | null;\n  viewingHistoryItem: string | null; // history item id\n  isSelectionMode: boolean;\n  selectedHistoryIds: string[];\n  isPaymentModalOpen: boolean;\n  isQuotaModalOpen: boolean;\n}\n\nconst initialState: AppState = {\n  currentView: AppView.HOME,\n  loadingState: LoadingState.IDLE,\n  errorMsg: null,\n  viewingHistoryItem: null,\n  isSelectionMode: false,\n  selectedHistoryIds: [],\n  isPaymentModalOpen: false,\n  isQuotaModalOpen: false,\n};\n\nconst appSlice = createSlice({\n  name: 'app',\n  initialState,\n  reducers: {\n    setCurrentView: (state, action: PayloadAction<AppView>) => {\n      state.currentView = action.payload;\n    },\n    setLoadingState: (state, action: PayloadAction<LoadingState>) => {\n      state.loadingState = action.payload;\n    },\n    setErrorMsg: (state, action: PayloadAction<string | null>) => {\n      state.errorMsg = action.payload;\n    },\n    setViewingHistoryItem: (state, action: PayloadAction<string | null>) => {\n      state.viewingHistoryItem = action.payload;\n    },\n    setIsSelectionMode: (state, action: PayloadAction<boolean>) => {\n      state.isSelectionMode = action.payload;\n    },\n    setSelectedHistoryIds: (state, action: PayloadAction<string[]>) => {\n      state.selectedHistoryIds = action.payload;\n    },\n    toggleHistorySelection: (state, action: PayloadAction<string>) => {\n      const id = action.payload;\n      if (state.selectedHistoryIds.includes(id)) {\n        state.selectedHistoryIds = state.selectedHistoryIds.filter(x => x !== id);\n      } else {\n        if (state.selectedHistoryIds.length < 9) {\n          state.selectedHistoryIds.push(id);\n        }\n      }\n    },\n    setIsPaymentModalOpen: (state, action: PayloadAction<boolean>) => {\n      state.isPaymentModalOpen = action.payload;\n    },\n    setIsQuotaModalOpen: (state, action: PayloadAction<boolean>) => {\n      state.isQuotaModalOpen = action.payload;\n    },\n  },\n});\n\nexport const {\n  setCurrentView,\n  setLoadingState,\n  setErrorMsg,\n  setViewingHistoryItem,\n  setIsSelectionMode,\n  setSelectedHistoryIds,\n  toggleHistorySelection,\n  setIsPaymentModalOpen,\n  setIsQuotaModalOpen,\n} = appSlice.actions;\n\nexport default appSlice.reducer;\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAaA,MAAM,eAAyB;IAC7B,aAAa,mHAAO,CAAC,IAAI;IACzB,cAAc,wHAAY,CAAC,IAAI;IAC/B,UAAU;IACV,oBAAoB;IACpB,iBAAiB;IACjB,oBAAoB,EAAE;IACtB,oBAAoB;IACpB,kBAAkB;AACpB;AAEA,MAAM,WAAW,IAAA,qZAAW,EAAC;IAC3B,MAAM;IACN;IACA,UAAU;QACR,gBAAgB,CAAC,OAAO;YACtB,MAAM,WAAW,GAAG,OAAO,OAAO;QACpC;QACA,iBAAiB,CAAC,OAAO;YACvB,MAAM,YAAY,GAAG,OAAO,OAAO;QACrC;QACA,aAAa,CAAC,OAAO;YACnB,MAAM,QAAQ,GAAG,OAAO,OAAO;QACjC;QACA,uBAAuB,CAAC,OAAO;YAC7B,MAAM,kBAAkB,GAAG,OAAO,OAAO;QAC3C;QACA,oBAAoB,CAAC,OAAO;YAC1B,MAAM,eAAe,GAAG,OAAO,OAAO;QACxC;QACA,uBAAuB,CAAC,OAAO;YAC7B,MAAM,kBAAkB,GAAG,OAAO,OAAO;QAC3C;QACA,wBAAwB,CAAC,OAAO;YAC9B,MAAM,KAAK,OAAO,OAAO;YACzB,IAAI,MAAM,kBAAkB,CAAC,QAAQ,CAAC,KAAK;gBACzC,MAAM,kBAAkB,GAAG,MAAM,kBAAkB,CAAC,MAAM,CAAC,CAAA,IAAK,MAAM;YACxE,OAAO;gBACL,IAAI,MAAM,kBAAkB,CAAC,MAAM,GAAG,GAAG;oBACvC,MAAM,kBAAkB,CAAC,IAAI,CAAC;gBAChC;YACF;QACF;QACA,uBAAuB,CAAC,OAAO;YAC7B,MAAM,kBAAkB,GAAG,OAAO,OAAO;QAC3C;QACA,qBAAqB,CAAC,OAAO;YAC3B,MAAM,gBAAgB,GAAG,OAAO,OAAO;QACzC;IACF;AACF;AAEO,MAAM,EACX,cAAc,EACd,eAAe,EACf,WAAW,EACX,qBAAqB,EACrB,kBAAkB,EAClB,qBAAqB,EACrB,sBAAsB,EACtB,qBAAqB,EACrB,mBAAmB,EACpB,GAAG,SAAS,OAAO;uCAEL,SAAS,OAAO"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/store/slices/imageSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { GeneratedImage } from '@/types';\n\ninterface ImageState {\n  sourceImage: string | null;\n  mimeType: string;\n  prompt: string;\n  selectedStyle: string | null;\n  aspectRatio: string;\n  imageSize: '1K' | '2K' | '4K';\n  imageFormat: 'PNG' | 'JPEG' | 'WEBP';\n  resultImage: string | null;\n  history: GeneratedImage[];\n}\n\nconst initialState: ImageState = {\n  sourceImage: null,\n  mimeType: 'image/png',\n  prompt: '',\n  selectedStyle: null,\n  aspectRatio: '16:9',\n  imageSize: '1K',\n  imageFormat: 'PNG',\n  resultImage: null,\n  history: [],\n};\n\nconst imageSlice = createSlice({\n  name: 'image',\n  initialState,\n  reducers: {\n    setSourceImage: (state, action: PayloadAction<{ image: string; mimeType: string }>) => {\n      state.sourceImage = action.payload.image;\n      state.mimeType = action.payload.mimeType;\n      // 保存到 localStorage（在 action 外部处理，避免在 reducer 中直接操作 localStorage）\n    },\n    setPrompt: (state, action: PayloadAction<string>) => {\n      state.prompt = action.payload;\n    },\n    setSelectedStyle: (state, action: PayloadAction<string | null>) => {\n      state.selectedStyle = action.payload;\n    },\n    setAspectRatio: (state, action: PayloadAction<string>) => {\n      state.aspectRatio = action.payload;\n    },\n    setImageSize: (state, action: PayloadAction<'1K' | '2K' | '4K'>) => {\n      state.imageSize = action.payload;\n    },\n    setImageFormat: (state, action: PayloadAction<'PNG' | 'JPEG' | 'WEBP'>) => {\n      state.imageFormat = action.payload;\n    },\n    setResultImage: (state, action: PayloadAction<string | null>) => {\n      state.resultImage = action.payload;\n    },\n    addToHistory: (state, action: PayloadAction<GeneratedImage>) => {\n      state.history = [action.payload, ...state.history].slice(0, 10);\n    },\n    removeFromHistory: (state, action: PayloadAction<string>) => {\n      state.history = state.history.filter(item => item.id !== action.payload);\n    },\n    setHistory: (state, action: PayloadAction<GeneratedImage[]>) => {\n      state.history = action.payload;\n    },\n    resetImageState: (state) => {\n      state.sourceImage = null;\n      state.prompt = '';\n      state.selectedStyle = null;\n      state.resultImage = null;\n    },\n  },\n});\n\nexport const {\n  setSourceImage,\n  setPrompt,\n  setSelectedStyle,\n  setAspectRatio,\n  setImageSize,\n  setImageFormat,\n  setResultImage,\n  addToHistory,\n  removeFromHistory,\n  setHistory,\n  resetImageState,\n} = imageSlice.actions;\n\nexport default imageSlice.reducer;\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAeA,MAAM,eAA2B;IAC/B,aAAa;IACb,UAAU;IACV,QAAQ;IACR,eAAe;IACf,aAAa;IACb,WAAW;IACX,aAAa;IACb,aAAa;IACb,SAAS,EAAE;AACb;AAEA,MAAM,aAAa,IAAA,qZAAW,EAAC;IAC7B,MAAM;IACN;IACA,UAAU;QACR,gBAAgB,CAAC,OAAO;YACtB,MAAM,WAAW,GAAG,OAAO,OAAO,CAAC,KAAK;YACxC,MAAM,QAAQ,GAAG,OAAO,OAAO,CAAC,QAAQ;QACxC,iEAAiE;QACnE;QACA,WAAW,CAAC,OAAO;YACjB,MAAM,MAAM,GAAG,OAAO,OAAO;QAC/B;QACA,kBAAkB,CAAC,OAAO;YACxB,MAAM,aAAa,GAAG,OAAO,OAAO;QACtC;QACA,gBAAgB,CAAC,OAAO;YACtB,MAAM,WAAW,GAAG,OAAO,OAAO;QACpC;QACA,cAAc,CAAC,OAAO;YACpB,MAAM,SAAS,GAAG,OAAO,OAAO;QAClC;QACA,gBAAgB,CAAC,OAAO;YACtB,MAAM,WAAW,GAAG,OAAO,OAAO;QACpC;QACA,gBAAgB,CAAC,OAAO;YACtB,MAAM,WAAW,GAAG,OAAO,OAAO;QACpC;QACA,cAAc,CAAC,OAAO;YACpB,MAAM,OAAO,GAAG;gBAAC,OAAO,OAAO;mBAAK,MAAM,OAAO;aAAC,CAAC,KAAK,CAAC,GAAG;QAC9D;QACA,mBAAmB,CAAC,OAAO;YACzB,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,OAAO,OAAO;QACzE;QACA,YAAY,CAAC,OAAO;YAClB,MAAM,OAAO,GAAG,OAAO,OAAO;QAChC;QACA,iBAAiB,CAAC;YAChB,MAAM,WAAW,GAAG;YACpB,MAAM,MAAM,GAAG;YACf,MAAM,aAAa,GAAG;YACtB,MAAM,WAAW,GAAG;QACtB;IACF;AACF;AAEO,MAAM,EACX,cAAc,EACd,SAAS,EACT,gBAAgB,EAChB,cAAc,EACd,YAAY,EACZ,cAAc,EACd,cAAc,EACd,YAAY,EACZ,iBAAiB,EACjB,UAAU,EACV,eAAe,EAChB,GAAG,WAAW,OAAO;uCAEP,WAAW,OAAO"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/store/slices/memeSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { MemeDraft, AnimationType } from '@/types';\n\ninterface MemeState {\n  memeDrafts: MemeDraft[];\n  activeDraftIndex: number;\n  selectedMoodPack: string;\n  isExporting: boolean;\n  exportWithBackground: boolean;\n}\n\nconst initialState: MemeState = {\n  memeDrafts: [],\n  activeDraftIndex: 0,\n  selectedMoodPack: 'custom',\n  isExporting: false,\n  exportWithBackground: true, // 默认有背景色\n};\n\nconst memeSlice = createSlice({\n  name: 'meme',\n  initialState,\n  reducers: {\n    setMemeDrafts: (state, action: PayloadAction<MemeDraft[]>) => {\n      state.memeDrafts = action.payload;\n    },\n    updateMemeDraft: (state, action: PayloadAction<{ index: number; draft: Partial<MemeDraft> }>) => {\n      const { index, draft } = action.payload;\n      if (state.memeDrafts[index]) {\n        state.memeDrafts[index] = { ...state.memeDrafts[index], ...draft };\n      }\n    },\n    setActiveDraftIndex: (state, action: PayloadAction<number>) => {\n      state.activeDraftIndex = action.payload;\n    },\n    setSelectedMoodPack: (state, action: PayloadAction<string>) => {\n      state.selectedMoodPack = action.payload;\n    },\n    setIsExporting: (state, action: PayloadAction<boolean>) => {\n      state.isExporting = action.payload;\n    },\n    setExportWithBackground: (state, action: PayloadAction<boolean>) => {\n      state.exportWithBackground = action.payload;\n    },\n  },\n});\n\nexport const {\n  setMemeDrafts,\n  updateMemeDraft,\n  setActiveDraftIndex,\n  setSelectedMoodPack,\n  setIsExporting,\n  setExportWithBackground,\n} = memeSlice.actions;\n\nexport default memeSlice.reducer;\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAWA,MAAM,eAA0B;IAC9B,YAAY,EAAE;IACd,kBAAkB;IAClB,kBAAkB;IAClB,aAAa;IACb,sBAAsB;AACxB;AAEA,MAAM,YAAY,IAAA,qZAAW,EAAC;IAC5B,MAAM;IACN;IACA,UAAU;QACR,eAAe,CAAC,OAAO;YACrB,MAAM,UAAU,GAAG,OAAO,OAAO;QACnC;QACA,iBAAiB,CAAC,OAAO;YACvB,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,OAAO,OAAO;YACvC,IAAI,MAAM,UAAU,CAAC,MAAM,EAAE;gBAC3B,MAAM,UAAU,CAAC,MAAM,GAAG;oBAAE,GAAG,MAAM,UAAU,CAAC,MAAM;oBAAE,GAAG,KAAK;gBAAC;YACnE;QACF;QACA,qBAAqB,CAAC,OAAO;YAC3B,MAAM,gBAAgB,GAAG,OAAO,OAAO;QACzC;QACA,qBAAqB,CAAC,OAAO;YAC3B,MAAM,gBAAgB,GAAG,OAAO,OAAO;QACzC;QACA,gBAAgB,CAAC,OAAO;YACtB,MAAM,WAAW,GAAG,OAAO,OAAO;QACpC;QACA,yBAAyB,CAAC,OAAO;YAC/B,MAAM,oBAAoB,GAAG,OAAO,OAAO;QAC7C;IACF;AACF;AAEO,MAAM,EACX,aAAa,EACb,eAAe,EACf,mBAAmB,EACnB,mBAAmB,EACnB,cAAc,EACd,uBAAuB,EACxB,GAAG,UAAU,OAAO;uCAEN,UAAU,OAAO"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/store/slices/userSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { UserTier, DailyUsage } from '@/types';\n\nexport enum UserStatus {\n  GUEST = 'GUEST', // 游客\n  LOGGED_IN = 'LOGGED_IN', // 已登录\n}\n\ninterface UserState {\n  status: UserStatus; // 用户状态：游客或已登录\n  userId: string | null; // 用户ID（登录后才有）\n  phone: string | null; // 手机号（登录后才有）\n  userTier: UserTier;\n  sceneUsage: DailyUsage; // 场景扩展使用量\n  memeUsage: DailyUsage; // 表情包制作使用量\n}\n\nconst initialState: UserState = {\n  status: UserStatus.GUEST,\n  userId: null,\n  phone: null,\n  userTier: UserTier.FREE,\n  sceneUsage: { date: new Date().toLocaleDateString(), count: 0 },\n  memeUsage: { date: new Date().toLocaleDateString(), count: 0 },\n};\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setUserStatus: (state, action: PayloadAction<UserStatus>) => {\n      state.status = action.payload;\n    },\n    setUserId: (state, action: PayloadAction<string | null>) => {\n      state.userId = action.payload;\n    },\n    setUserPhone: (state, action: PayloadAction<string | null>) => {\n      state.phone = action.payload;\n    },\n    setUserTier: (state, action: PayloadAction<UserTier>) => {\n      state.userTier = action.payload;\n    },\n    setUserInfo: (state, action: PayloadAction<{ userId: string; phone: string; userTier: UserTier }>) => {\n      state.userId = action.payload.userId;\n      state.phone = action.payload.phone;\n      state.userTier = action.payload.userTier;\n      state.status = UserStatus.LOGGED_IN;\n    },\n    clearUserInfo: (state) => {\n      state.status = UserStatus.GUEST;\n      state.userId = null;\n      state.phone = null;\n      state.userTier = UserTier.FREE;\n      state.sceneUsage = { date: new Date().toLocaleDateString(), count: 0 };\n      state.memeUsage = { date: new Date().toLocaleDateString(), count: 0 };\n    },\n    setSceneUsage: (state, action: PayloadAction<DailyUsage>) => {\n      state.sceneUsage = action.payload;\n    },\n    setMemeUsage: (state, action: PayloadAction<DailyUsage>) => {\n      state.memeUsage = action.payload;\n    },\n    // 兼容旧代码，保留 dailyUsage（映射到 sceneUsage）\n    setDailyUsage: (state, action: PayloadAction<DailyUsage>) => {\n      state.sceneUsage = action.payload;\n    },\n    updateSceneUsage: (state, action: PayloadAction<number>) => {\n      const today = new Date().toLocaleDateString();\n      if (state.sceneUsage.date !== today) {\n        state.sceneUsage = { date: today, count: action.payload };\n      } else {\n        state.sceneUsage.count += action.payload;\n      }\n    },\n    updateMemeUsage: (state, action: PayloadAction<number>) => {\n      const today = new Date().toLocaleDateString();\n      if (state.memeUsage.date !== today) {\n        state.memeUsage = { date: today, count: action.payload };\n      } else {\n        state.memeUsage.count += action.payload;\n      }\n    },\n    // 兼容旧代码\n    updateUsage: (state, action: PayloadAction<number>) => {\n      const today = new Date().toLocaleDateString();\n      if (state.sceneUsage.date !== today) {\n        state.sceneUsage = { date: today, count: action.payload };\n      } else {\n        state.sceneUsage.count += action.payload;\n      }\n    },\n    resetDailyUsage: (state) => {\n      const today = new Date().toLocaleDateString();\n      if (state.sceneUsage.date !== today) {\n        state.sceneUsage = { date: today, count: 0 };\n      }\n      if (state.memeUsage.date !== today) {\n        state.memeUsage = { date: today, count: 0 };\n      }\n    },\n  },\n});\n\nexport const {\n  setUserStatus,\n  setUserId,\n  setUserPhone,\n  setUserTier,\n  setUserInfo,\n  clearUserInfo,\n  setSceneUsage,\n  setMemeUsage,\n  setDailyUsage,\n  updateSceneUsage,\n  updateMemeUsage,\n  updateUsage,\n  resetDailyUsage,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAEO,IAAA,AAAK,oCAAA;;;WAAA;;AAcZ,MAAM,eAA0B;IAC9B,MAAM;IACN,QAAQ;IACR,OAAO;IACP,UAAU,oHAAQ,CAAC,IAAI;IACvB,YAAY;QAAE,MAAM,IAAI,OAAO,kBAAkB;QAAI,OAAO;IAAE;IAC9D,WAAW;QAAE,MAAM,IAAI,OAAO,kBAAkB;QAAI,OAAO;IAAE;AAC/D;AAEA,MAAM,YAAY,IAAA,qZAAW,EAAC;IAC5B,MAAM;IACN;IACA,UAAU;QACR,eAAe,CAAC,OAAO;YACrB,MAAM,MAAM,GAAG,OAAO,OAAO;QAC/B;QACA,WAAW,CAAC,OAAO;YACjB,MAAM,MAAM,GAAG,OAAO,OAAO;QAC/B;QACA,cAAc,CAAC,OAAO;YACpB,MAAM,KAAK,GAAG,OAAO,OAAO;QAC9B;QACA,aAAa,CAAC,OAAO;YACnB,MAAM,QAAQ,GAAG,OAAO,OAAO;QACjC;QACA,aAAa,CAAC,OAAO;YACnB,MAAM,MAAM,GAAG,OAAO,OAAO,CAAC,MAAM;YACpC,MAAM,KAAK,GAAG,OAAO,OAAO,CAAC,KAAK;YAClC,MAAM,QAAQ,GAAG,OAAO,OAAO,CAAC,QAAQ;YACxC,MAAM,MAAM;QACd;QACA,eAAe,CAAC;YACd,MAAM,MAAM;YACZ,MAAM,MAAM,GAAG;YACf,MAAM,KAAK,GAAG;YACd,MAAM,QAAQ,GAAG,oHAAQ,CAAC,IAAI;YAC9B,MAAM,UAAU,GAAG;gBAAE,MAAM,IAAI,OAAO,kBAAkB;gBAAI,OAAO;YAAE;YACrE,MAAM,SAAS,GAAG;gBAAE,MAAM,IAAI,OAAO,kBAAkB;gBAAI,OAAO;YAAE;QACtE;QACA,eAAe,CAAC,OAAO;YACrB,MAAM,UAAU,GAAG,OAAO,OAAO;QACnC;QACA,cAAc,CAAC,OAAO;YACpB,MAAM,SAAS,GAAG,OAAO,OAAO;QAClC;QACA,sCAAsC;QACtC,eAAe,CAAC,OAAO;YACrB,MAAM,UAAU,GAAG,OAAO,OAAO;QACnC;QACA,kBAAkB,CAAC,OAAO;YACxB,MAAM,QAAQ,IAAI,OAAO,kBAAkB;YAC3C,IAAI,MAAM,UAAU,CAAC,IAAI,KAAK,OAAO;gBACnC,MAAM,UAAU,GAAG;oBAAE,MAAM;oBAAO,OAAO,OAAO,OAAO;gBAAC;YAC1D,OAAO;gBACL,MAAM,UAAU,CAAC,KAAK,IAAI,OAAO,OAAO;YAC1C;QACF;QACA,iBAAiB,CAAC,OAAO;YACvB,MAAM,QAAQ,IAAI,OAAO,kBAAkB;YAC3C,IAAI,MAAM,SAAS,CAAC,IAAI,KAAK,OAAO;gBAClC,MAAM,SAAS,GAAG;oBAAE,MAAM;oBAAO,OAAO,OAAO,OAAO;gBAAC;YACzD,OAAO;gBACL,MAAM,SAAS,CAAC,KAAK,IAAI,OAAO,OAAO;YACzC;QACF;QACA,QAAQ;QACR,aAAa,CAAC,OAAO;YACnB,MAAM,QAAQ,IAAI,OAAO,kBAAkB;YAC3C,IAAI,MAAM,UAAU,CAAC,IAAI,KAAK,OAAO;gBACnC,MAAM,UAAU,GAAG;oBAAE,MAAM;oBAAO,OAAO,OAAO,OAAO;gBAAC;YAC1D,OAAO;gBACL,MAAM,UAAU,CAAC,KAAK,IAAI,OAAO,OAAO;YAC1C;QACF;QACA,iBAAiB,CAAC;YAChB,MAAM,QAAQ,IAAI,OAAO,kBAAkB;YAC3C,IAAI,MAAM,UAAU,CAAC,IAAI,KAAK,OAAO;gBACnC,MAAM,UAAU,GAAG;oBAAE,MAAM;oBAAO,OAAO;gBAAE;YAC7C;YACA,IAAI,MAAM,SAAS,CAAC,IAAI,KAAK,OAAO;gBAClC,MAAM,SAAS,GAAG;oBAAE,MAAM;oBAAO,OAAO;gBAAE;YAC5C;QACF;IACF;AACF;AAEO,MAAM,EACX,aAAa,EACb,SAAS,EACT,YAAY,EACZ,WAAW,EACX,WAAW,EACX,aAAa,EACb,aAAa,EACb,YAAY,EACZ,aAAa,EACb,gBAAgB,EAChB,eAAe,EACf,WAAW,EACX,eAAe,EAChB,GAAG,UAAU,OAAO;uCAEN,UAAU,OAAO"}},
    {"offset": {"line": 472, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/store/store.ts"],"sourcesContent":["import { configureStore, PreloadedState } from '@reduxjs/toolkit';\nimport appReducer from './slices/appSlice';\nimport imageReducer from './slices/imageSlice';\nimport memeReducer from './slices/memeSlice';\nimport userReducer, { UserState } from './slices/userSlice';\nimport { GeneratedImage } from '@/types';\n\nexport interface RootState {\n  app: ReturnType<typeof appReducer>;\n  image: ReturnType<typeof imageReducer>;\n  meme: ReturnType<typeof memeReducer>;\n  user: UserState;\n}\n\nexport function makeStore(preloadedState?: PreloadedState<RootState>) {\n  return configureStore({\n    reducer: {\n      app: appReducer,\n      image: imageReducer,\n      meme: memeReducer,\n      user: userReducer,\n    },\n    preloadedState: preloadedState,\n  });\n}\n\nexport const store = makeStore();\n\nexport type AppDispatch = typeof store.dispatch;\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAUO,SAAS,UAAU,cAA0C;IAClE,OAAO,IAAA,wZAAc,EAAC;QACpB,SAAS;YACP,KAAK,yIAAU;YACf,OAAO,2IAAY;YACnB,MAAM,0IAAW;YACjB,MAAM,0IAAW;QACnB;QACA,gBAAgB;IAClB;AACF;AAEO,MAAM,QAAQ"}},
    {"offset": {"line": 507, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/store/hooks.ts"],"sourcesContent":["import { useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\nexport const useAppDispatch = useDispatch.withTypes<AppDispatch>();\nexport const useAppSelector = useSelector.withTypes<RootState>();\n\n"],"names":[],"mappings":";;;;;;AAAA;;AAGO,MAAM,iBAAiB,oTAAW,CAAC,SAAS;AAC5C,MAAM,iBAAiB,oTAAW,CAAC,SAAS"}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/lib/date-utils.ts"],"sourcesContent":["/**\n * 日期工具函数\n * 统一日期格式，避免不同环境下的格式差异\n */\n\n/**\n * 获取今天的日期字符串（格式：YYYY-MM-DD）\n */\nexport function getTodayDateString(): string {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = String(today.getMonth() + 1).padStart(2, '0');\n  const day = String(today.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n/**\n * 将日期转换为统一格式（YYYY-MM-DD）\n * 如果输入是字符串，尝试解析并转换\n */\nexport function normalizeDateString(date: string | Date): string {\n  if (date instanceof Date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n  \n  // 如果是字符串，尝试解析\n  const dateObj = new Date(date);\n  if (!isNaN(dateObj.getTime())) {\n    const year = dateObj.getFullYear();\n    const month = String(dateObj.getMonth() + 1).padStart(2, '0');\n    const day = String(dateObj.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n  \n  // 如果已经是 YYYY-MM-DD 格式，直接返回\n  if (/^\\d{4}-\\d{2}-\\d{2}$/.test(date)) {\n    return date;\n  }\n  \n  // 尝试解析其他格式（如 M/D/YYYY 或 YYYY/M/D）\n  const parts = date.split(/[\\/\\-]/);\n  if (parts.length === 3) {\n    let year: string, month: string, day: string;\n    \n    // 判断格式：如果第一部分是4位数，则是 YYYY/M/D\n    if (parts[0].length === 4) {\n      year = parts[0];\n      month = parts[1].padStart(2, '0');\n      day = parts[2].padStart(2, '0');\n    } else {\n      // 否则是 M/D/YYYY\n      month = parts[0].padStart(2, '0');\n      day = parts[1].padStart(2, '0');\n      year = parts[2];\n    }\n    \n    return `${year}-${month}-${day}`;\n  }\n  \n  // 如果无法解析，返回原字符串\n  return date;\n}\n\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED;;CAEC;;;;;;AACM,SAAS;IACd,MAAM,QAAQ,IAAI;IAClB,MAAM,OAAO,MAAM,WAAW;IAC9B,MAAM,QAAQ,OAAO,MAAM,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;IACvD,MAAM,MAAM,OAAO,MAAM,OAAO,IAAI,QAAQ,CAAC,GAAG;IAChD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;AAClC;AAMO,SAAS,oBAAoB,IAAmB;IACrD,IAAI,gBAAgB,MAAM;QACxB,MAAM,OAAO,KAAK,WAAW;QAC7B,MAAM,QAAQ,OAAO,KAAK,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;QACtD,MAAM,MAAM,OAAO,KAAK,OAAO,IAAI,QAAQ,CAAC,GAAG;QAC/C,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;IAClC;IAEA,cAAc;IACd,MAAM,UAAU,IAAI,KAAK;IACzB,IAAI,CAAC,MAAM,QAAQ,OAAO,KAAK;QAC7B,MAAM,OAAO,QAAQ,WAAW;QAChC,MAAM,QAAQ,OAAO,QAAQ,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;QACzD,MAAM,MAAM,OAAO,QAAQ,OAAO,IAAI,QAAQ,CAAC,GAAG;QAClD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;IAClC;IAEA,2BAA2B;IAC3B,IAAI,sBAAsB,IAAI,CAAC,OAAO;QACpC,OAAO;IACT;IAEA,kCAAkC;IAClC,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,IAAI,MAAc,OAAe;QAEjC,8BAA8B;QAC9B,IAAI,KAAK,CAAC,EAAE,CAAC,MAAM,KAAK,GAAG;YACzB,OAAO,KAAK,CAAC,EAAE;YACf,QAAQ,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;YAC7B,MAAM,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;QAC7B,OAAO;YACL,eAAe;YACf,QAAQ,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;YAC7B,MAAM,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;YAC3B,OAAO,KAAK,CAAC,EAAE;QACjB;QAEA,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;IAClC;IAEA,gBAAgB;IAChB,OAAO;AACT"}},
    {"offset": {"line": 588, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/app/providers/ReduxProvider.tsx"],"sourcesContent":["'use client';\n\nimport { Provider } from 'react-redux';\nimport { makeStore } from '@/store/store';\nimport { useEffect, useRef } from 'react';\nimport { useAppDispatch, useAppSelector } from '@/store/hooks';\nimport { setUserTier, setSceneUsage, setMemeUsage, setUserStatus, setUserInfo } from '@/store/slices/userSlice';\nimport { addToHistory, setHistory } from '@/store/slices/imageSlice';\nimport { GeneratedImage } from '@/types';\nimport { UserTier, DailyUsage } from '@/types';\nimport { UserStatus, UserState } from '@/store/slices/userSlice';\nimport { getTodayDateString } from '@/lib/date-utils';\n\nconst SCENE_USAGE_KEY = 'ip_creative_scene_usage';\nconst MEME_USAGE_KEY = 'ip_creative_meme_usage';\nconst STORAGE_KEY = 'ip_creative_history_v1';\n\ninterface ReduxProviderProps {\n  children: React.ReactNode;\n  initialUserState?: Partial<UserState>;\n  initialHistory?: GeneratedImage[];\n}\n\n// 初始化 Redux state 的组件\nfunction ReduxInitializer({ initialUserState, initialHistory }: { initialUserState?: Partial<UserState>; initialHistory?: GeneratedImage[] }) {\n  const dispatch = useAppDispatch();\n  const currentUserId = useAppSelector((state) => state.user.userId);\n  const userTier = useAppSelector((state) => state.user.userTier);\n  const sceneUsage = useAppSelector((state) => state.user.sceneUsage);\n  const memeUsage = useAppSelector((state) => state.user.memeUsage);\n  const history = useAppSelector((state) => state.image.history);\n  const initialized = useRef(false);\n\n  // 使用 SSR 传入的初始状态\n  useEffect(() => {\n    if (initialized.current) return;\n    initialized.current = true;\n\n    // 用户状态已通过 preloadedState 设置，不需要在 useEffect 中再次设置\n    // 但如果 initialUserState 存在且当前状态为空（客户端导航），则设置\n    if (initialUserState) {\n      // 设置用户信息\n      if (initialUserState.userId) {\n        // 只在状态未初始化时设置（避免覆盖 SSR 数据）\n        // 如果当前没有 userId 或 userId 不匹配，说明是客户端导航，需要设置\n        if (!currentUserId || currentUserId !== initialUserState.userId) {\n          dispatch(setUserInfo({\n            userId: initialUserState.userId,\n            phone: initialUserState.phone || '',\n            userTier: initialUserState.userTier || UserTier.FREE,\n          }));\n          if (initialUserState.sceneUsage) {\n            dispatch(setSceneUsage(initialUserState.sceneUsage));\n          }\n          if (initialUserState.memeUsage) {\n            dispatch(setMemeUsage(initialUserState.memeUsage));\n          }\n        }\n      } else {\n        // 游客状态\n        dispatch(setUserStatus(UserStatus.GUEST));\n        \n        // 加载游客的使用量（从 localStorage）\n        const savedSceneUsage = localStorage.getItem(SCENE_USAGE_KEY);\n        if (savedSceneUsage) {\n          try {\n            const usage = JSON.parse(savedSceneUsage);\n            dispatch(setSceneUsage(usage));\n          } catch (e) {\n            console.error('Failed to load scene usage', e);\n          }\n        }\n\n        const savedMemeUsage = localStorage.getItem(MEME_USAGE_KEY);\n        if (savedMemeUsage) {\n          try {\n            const usage = JSON.parse(savedMemeUsage);\n            dispatch(setMemeUsage(usage));\n          } catch (e) {\n            console.error('Failed to load meme usage', e);\n          }\n        }\n      }\n    }\n\n    // 历史记录已通过 preloadedState 设置，不需要在 useEffect 中设置\n    // 但如果 initialHistory 存在且当前 history 为空，则设置（用于客户端导航）\n    if (initialHistory && initialHistory.length > 0 && history.length === 0) {\n      dispatch(setHistory(initialHistory));\n    }\n  }, [dispatch, initialUserState, initialHistory, history]);\n\n  const userStatus = useAppSelector((state) => state.user.status);\n  \n  useEffect(() => {\n    // 只有游客状态才保存到 localStorage，登录用户的使用次数由后端管理\n    if (userStatus === UserStatus.GUEST) {\n      localStorage.setItem(SCENE_USAGE_KEY, JSON.stringify(sceneUsage));\n    }\n  }, [sceneUsage, userStatus]);\n\n  useEffect(() => {\n    // 只有游客状态才保存到 localStorage，登录用户的使用次数由后端管理\n    if (userStatus === UserStatus.GUEST) {\n      localStorage.setItem(MEME_USAGE_KEY, JSON.stringify(memeUsage));\n    }\n  }, [memeUsage, userStatus]);\n\n  // 历史记录不再保存到 localStorage，改为保存到数据库\n\n  // 日期检查和重置已在 SSR 侧处理（getUserInfoFromDB），客户端不再需要检查\n  // 如果需要在客户端检查，应该使用 getTodayDateString() 而不是 toLocaleDateString()\n\n  return null;\n}\n\nexport default function ReduxProvider({ children, initialUserState, initialHistory }: ReduxProviderProps) {\n  // 创建 store 实例（使用初始状态）\n  const storeRef = useRef<ReturnType<typeof makeStore> | null>(null);\n  if (!storeRef.current) {\n    const preloadedState: any = {};\n    if (initialUserState) {\n      // 将用户状态（包括使用次数）作为初始状态传入\n      preloadedState.user = {\n        status: initialUserState.userId ? UserStatus.LOGGED_IN : UserStatus.GUEST,\n        userId: initialUserState.userId || null,\n        phone: initialUserState.phone || null,\n        userTier: initialUserState.userTier || UserTier.FREE,\n        sceneUsage: initialUserState.sceneUsage || { date: getTodayDateString(), count: 0 },\n        memeUsage: initialUserState.memeUsage || { date: getTodayDateString(), count: 0 },\n      };\n    }\n    if (initialHistory) {\n      preloadedState.image = {\n        sourceImage: null,\n        mimeType: 'image/png',\n        prompt: '',\n        selectedStyle: null,\n        aspectRatio: '16:9',\n        imageSize: '1K',\n        imageFormat: 'PNG',\n        resultImage: null,\n        history: initialHistory,\n      };\n    }\n    storeRef.current = makeStore(preloadedState);\n  }\n\n  return (\n    <Provider store={storeRef.current}>\n      <ReduxInitializer initialUserState={initialUserState} initialHistory={initialHistory} />\n      {children}\n    </Provider>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/components/TabBar.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { Home, PlusCircle, User, Wand2 } from 'lucide-react';\n\nconst TabBar: React.FC = () => {\n  const pathname = usePathname();\n  const isHome = pathname === '/';\n  const isCreate = pathname === '/create' || pathname === '/upload';\n  const isProfile = pathname === '/profile' || pathname === '/me';\n\n  return (\n    <>\n      {/* Mobile Bottom TabBar */}\n      <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 pb-safe-area shadow-lg z-50 h-16 flex items-center justify-around px-6 md:hidden\">\n        <Link\n          href=\"/\"\n          className={`flex flex-col items-center justify-center space-y-1 ${\n            isHome ? 'text-violet-600' : 'text-gray-400'\n          }`}\n        >\n          <Home size={24} strokeWidth={isHome ? 2.5 : 2} />\n          <span className=\"text-[10px] font-medium\">首页</span>\n        </Link>\n\n        <Link\n          href=\"/create\"\n          className=\"flex flex-col items-center justify-center -mt-6\"\n        >\n          <div className=\"bg-violet-600 text-white p-3 rounded-full shadow-violet-200 shadow-xl transform transition-transform active:scale-95\">\n              <PlusCircle size={32} />\n          </div>\n          <span className=\"text-[10px] font-medium text-gray-600 mt-1\">创作</span>\n        </Link>\n\n        <Link\n          href=\"/profile\"\n          className={`flex flex-col items-center justify-center space-y-1 ${\n            isProfile ? 'text-violet-600' : 'text-gray-400'\n          }`}\n        >\n          <User size={24} strokeWidth={isProfile ? 2.5 : 2} />\n          <span className=\"text-[10px] font-medium\">我的</span>\n        </Link>\n      </div>\n\n      {/* PC Top Navigation */}\n      <div className=\"hidden md:flex fixed top-0 left-0 right-0 bg-white border-b border-gray-100 shadow-sm z-50 h-16 items-center justify-between px-8\">\n        <Link href=\"/\" className=\"flex items-center gap-2 text-violet-600 hover:text-violet-700 transition-colors\">\n          <Wand2 size={24} />\n          <span className=\"font-bold text-lg\">IP 创想坊</span>\n        </Link>\n        \n        <nav className=\"flex items-center gap-1\">\n          <Link\n            href=\"/\"\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n              isHome\n                ? 'bg-violet-50 text-violet-600'\n                : 'text-gray-600 hover:bg-gray-50'\n            }`}\n          >\n            <div className=\"flex items-center gap-2\">\n              <Home size={18} />\n              <span>首页</span>\n            </div>\n          </Link>\n\n          <Link\n            href=\"/create\"\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n              isCreate\n                ? 'bg-violet-50 text-violet-600'\n                : 'text-gray-600 hover:bg-gray-50'\n            }`}\n          >\n            <div className=\"flex items-center gap-2\">\n              <PlusCircle size={18} />\n              <span>创作</span>\n            </div>\n          </Link>\n\n          <Link\n            href=\"/profile\"\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n              isProfile\n                ? 'bg-violet-50 text-violet-600'\n                : 'text-gray-600 hover:bg-gray-50'\n            }`}\n          >\n            <div className=\"flex items-center gap-2\">\n              <User size={18} />\n              <span>我的</span>\n            </div>\n          </Link>\n        </nav>\n      </div>\n    </>\n  );\n};\n\nexport default TabBar;"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;;;AALA;;;;AAOA,MAAM,SAAmB;;IACvB,MAAM,WAAW,IAAA,qTAAW;IAC5B,MAAM,SAAS,aAAa;IAC5B,MAAM,WAAW,aAAa,aAAa,aAAa;IACxD,MAAM,YAAY,aAAa,cAAc,aAAa;IAE1D,qBACE;;0BAEE,8VAAC;gBAAI,WAAU;;kCACb,8VAAC,2UAAI;wBACH,MAAK;wBACL,WAAW,CAAC,oDAAoD,EAC9D,SAAS,oBAAoB,iBAC7B;;0CAEF,8VAAC,kSAAI;gCAAC,MAAM;gCAAI,aAAa,SAAS,MAAM;;;;;;0CAC5C,8VAAC;gCAAK,WAAU;0CAA0B;;;;;;;;;;;;kCAG5C,8VAAC,2UAAI;wBACH,MAAK;wBACL,WAAU;;0CAEV,8VAAC;gCAAI,WAAU;0CACX,cAAA,8VAAC,uTAAU;oCAAC,MAAM;;;;;;;;;;;0CAEtB,8VAAC;gCAAK,WAAU;0CAA6C;;;;;;;;;;;;kCAG/D,8VAAC,2UAAI;wBACH,MAAK;wBACL,WAAW,CAAC,oDAAoD,EAC9D,YAAY,oBAAoB,iBAChC;;0CAEF,8VAAC,iSAAI;gCAAC,MAAM;gCAAI,aAAa,YAAY,MAAM;;;;;;0CAC/C,8VAAC;gCAAK,WAAU;0CAA0B;;;;;;;;;;;;;;;;;;0BAK9C,8VAAC;gBAAI,WAAU;;kCACb,8VAAC,2UAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACvB,8VAAC,+SAAK;gCAAC,MAAM;;;;;;0CACb,8VAAC;gCAAK,WAAU;0CAAoB;;;;;;;;;;;;kCAGtC,8VAAC;wBAAI,WAAU;;0CACb,8VAAC,2UAAI;gCACH,MAAK;gCACL,WAAW,CAAC,2DAA2D,EACrE,SACI,iCACA,kCACJ;0CAEF,cAAA,8VAAC;oCAAI,WAAU;;sDACb,8VAAC,kSAAI;4CAAC,MAAM;;;;;;sDACZ,8VAAC;sDAAK;;;;;;;;;;;;;;;;;0CAIV,8VAAC,2UAAI;gCACH,MAAK;gCACL,WAAW,CAAC,2DAA2D,EACrE,WACI,iCACA,kCACJ;0CAEF,cAAA,8VAAC;oCAAI,WAAU;;sDACb,8VAAC,uTAAU;4CAAC,MAAM;;;;;;sDAClB,8VAAC;sDAAK;;;;;;;;;;;;;;;;;0CAIV,8VAAC,2UAAI;gCACH,MAAK;gCACL,WAAW,CAAC,2DAA2D,EACrE,YACI,iCACA,kCACJ;0CAEF,cAAA,8VAAC;oCAAI,WAAU;;sDACb,8VAAC,iSAAI;4CAAC,MAAM;;;;;;sDACZ,8VAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOpB;GA9FM;;QACa,qTAAW;;;KADxB;uCAgGS"}},
    {"offset": {"line": 1081, "column": 0}, "map": {"version":3,"sources":["file:///Users/weili/work/generate-web/app/components/TabBarWrapper.tsx"],"sourcesContent":["'use client';\n\nimport { usePathname } from 'next/navigation';\nimport TabBar from '@/components/TabBar';\n\nexport default function TabBarWrapper() {\n  const pathname = usePathname();\n  \n  // 不在这些页面显示 TabBar\n  const hiddenPaths = ['/result', '/edit'];\n  if (hiddenPaths.includes(pathname)) {\n    return null;\n  }\n\n  return <TabBar />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,WAAW,IAAA,qTAAW;IAE5B,kBAAkB;IAClB,MAAM,cAAc;QAAC;QAAW;KAAQ;IACxC,IAAI,YAAY,QAAQ,CAAC,WAAW;QAClC,OAAO;IACT;IAEA,qBAAO,8VAAC,mIAAM;;;;;AAChB;GAVwB;;QACL,qTAAW;;;KADN"}}]
}