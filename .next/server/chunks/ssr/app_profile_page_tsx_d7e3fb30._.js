module.exports=[65066,a=>{"use strict";var b=a.i(46447),c=a.i(1470),d=a.i(86269);let e=(0,d.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var f=a.i(22497),g=a.i(79469),h=a.i(16616);let i=(0,d.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var j=a.i(65403),k=a.i(60935);let l=(0,d.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var m=a.i(97643),n=a.i(99898),o=a.i(1018),p=a.i(56489),q=a.i(34),r=a.i(91568),s=a.i(65427),t=a.i(4204),u=a.i(25934),v=a.i(3752),w=a.i(97689),x=a.i(1706);function y(){let a=(0,c.useRouter)(),d=(0,p.useAppDispatch)(),y=(0,p.useAppSelector)(a=>a.user.status),z=(0,p.useAppSelector)(a=>a.user.userId),A=(0,p.useAppSelector)(a=>a.user.phone),B=(0,p.useAppSelector)(a=>a.user.userTier===v.UserTier.PREMIUM),C=(0,p.useAppSelector)(a=>a.user.sceneUsage),D=(0,p.useAppSelector)(a=>a.user.memeUsage),E=(0,p.useAppSelector)(a=>a.image.history),F=(0,p.useAppSelector)(a=>a.app.isSelectionMode),G=(0,p.useAppSelector)(a=>a.app.selectedHistoryIds),H=(0,p.useAppSelector)(a=>a.app.viewingHistoryItem),I=(0,p.useAppSelector)(a=>a.app.isPaymentModalOpen),J=B?50:"LOGGED_IN"===y?5:1,K=C.count||0,L=D.count||0,M=Math.max(0,J-K),N=Math.max(0,J-L),O=Math.min(100,K/J*100),P=Math.min(100,L/J*100),Q=H?E.find(a=>a.id===H):null;return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",style:{backgroundColor:"#f9fafb"},children:[(0,b.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 pb-24 md:pt-16",style:{backgroundColor:"#f9fafb"},children:[(0,b.jsx)("header",{className:"bg-white p-4 md:hidden sticky top-0 z-10 shadow-sm border-b border-gray-100 flex items-center justify-center",children:(0,b.jsx)("h2",{className:"font-bold text-lg text-gray-800",children:"æˆ‘çš„"})}),(0,b.jsxs)("div",{className:"flex-1 p-4 md:p-8 space-y-6 overflow-y-auto max-w-7xl mx-auto w-full",children:[!F&&(0,b.jsxs)("div",{className:`relative rounded-3xl p-6 text-white overflow-hidden shadow-lg transition-all duration-500 ${B?"bg-gradient-to-br from-slate-800 to-slate-900 shadow-slate-200":"bg-gradient-to-br from-violet-500 to-violet-600 shadow-violet-200"}`,children:[B&&(0,b.jsx)("div",{className:"absolute -right-8 -top-8 text-white/10",children:(0,b.jsx)(g.Crown,{size:120})}),(0,b.jsxs)("div",{className:"relative z-10 flex items-center justify-between gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center text-2xl font-bold border-2 border-white/30",children:B?"ðŸ’Ž":"ðŸŽ¨"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-xl",children:B?"å°Šè´µä¼šå‘˜":"LOGGED_IN"===y?"æ™®é€šç”¨æˆ·":"æ¸¸å®¢"}),(0,b.jsx)("p",{className:"text-white/80 text-xs flex items-center gap-1 mt-1",children:"LOGGED_IN"===y&&A?(0,b.jsxs)(b.Fragment,{children:["ID: ",A,B&&(0,b.jsx)("span",{className:"bg-amber-400 text-amber-900 text-[10px] font-bold px-1.5 rounded ml-1",children:"PRO"})]}):(0,b.jsxs)(b.Fragment,{children:["ID: æ¸¸å®¢",B&&(0,b.jsx)("span",{className:"bg-amber-400 text-amber-900 text-[10px] font-bold px-1.5 rounded ml-1",children:"PRO"})]})})]})]}),"LOGGED_IN"===y&&(0,b.jsxs)("button",{onClick:async()=>{await (0,u.logout)(),d((0,t.clearUserInfo)()),a.push("/")},className:"px-4 py-2 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition-colors bg-white/10 hover:bg-white/20 text-white border border-white/20 whitespace-nowrap",children:[(0,b.jsx)(i,{size:16})," é€€å‡ºç™»å½•"]})]}),(0,b.jsxs)("div",{className:"relative z-10 space-y-3",children:[(0,b.jsxs)("div",{className:"bg-black/20 rounded-2xl p-4 backdrop-blur-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,b.jsx)("span",{className:"text-xs text-white/80",children:"åœºæ™¯æ‰©å±•é¢åº¦"}),(0,b.jsxs)("span",{className:"font-mono font-bold text-xl",children:[M," ",(0,b.jsxs)("span",{className:"text-sm text-white/60",children:["/ ",J]})]})]}),(0,b.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2 overflow-hidden",children:(0,b.jsx)("div",{className:`h-full rounded-full ${B?"bg-amber-400":"bg-white"}`,style:{width:`${100-O}%`}})})]}),(0,b.jsxs)("div",{className:"bg-black/20 rounded-2xl p-4 backdrop-blur-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,b.jsx)("span",{className:"text-xs text-white/80",children:"è¡¨æƒ…åŒ…åˆ¶ä½œé¢åº¦"}),(0,b.jsxs)("span",{className:"font-mono font-bold text-xl",children:[N," ",(0,b.jsxs)("span",{className:"text-sm text-white/60",children:["/ ",J]})]})]}),(0,b.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2 overflow-hidden",children:(0,b.jsx)("div",{className:`h-full rounded-full ${B?"bg-amber-400":"bg-white"}`,style:{width:`${100-P}%`}})})]}),(0,b.jsx)("p",{className:"text-[10px] text-white/60 text-right",children:"æ¯æ—¥ 00:00 é‡ç½®"})]}),(0,b.jsxs)("div",{className:"mt-4 space-y-2",children:["GUEST"===y&&(0,b.jsxs)("button",{onClick:()=>a.push("/login"),className:"w-full py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition-colors bg-white/10 hover:bg-white/20 text-white border border-white/20",children:[(0,b.jsx)(h.Zap,{size:16})," ç™»å½•èŽ·å–æ›´å¤šé¢åº¦"]}),"LOGGED_IN"===y&&(0,b.jsx)("button",{onClick:()=>{B?d((0,t.setUserTier)(v.UserTier.FREE)):d((0,q.setIsPaymentModalOpen)(!0))},className:`w-full py-3 md:py-2.5 rounded-xl font-semibold text-sm md:text-sm flex items-center justify-center gap-2 transition-colors ${B?"bg-white/10 hover:bg-white/20 text-white border border-white/20":"bg-amber-400 text-amber-900 hover:bg-amber-300 shadow-lg shadow-amber-900/20"}`,children:B?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Crown,{size:18,className:"md:w-4 md:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"åˆ‡æ¢å›žæ™®é€šç‰ˆ (æµ‹è¯•)"}),(0,b.jsx)("span",{className:"sm:hidden text-base",children:"åˆ‡æ¢æ™®é€šç‰ˆ"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Crown,{size:18,className:"md:w-4 md:h-4"}),(0,b.jsx)("span",{className:"text-base font-bold",children:"å‡çº§ä¼šå‘˜"})]})})]})]}),!F&&(0,b.jsxs)("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(g.Crown,{size:20,className:"text-amber-500"}),(0,b.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:"ä¼šå‘˜æƒç›Š"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center mt-0.5",children:(0,b.jsx)(j.Check,{size:14,className:"text-amber-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800 mb-1",children:"æ¯æ—¥ä½¿ç”¨é¢åº¦"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 leading-relaxed",children:[(0,b.jsx)("span",{className:"font-medium text-amber-600",children:"50 æ¬¡"})," ","åœºæ™¯æ‰©å±• +"," ",(0,b.jsx)("span",{className:"font-medium text-amber-600",children:"50 æ¬¡"})," ","è¡¨æƒ…åŒ…åˆ¶ä½œ"]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"æ™®é€šç”¨æˆ·æ¯æ—¥ä»… 5 æ¬¡é¢åº¦"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center mt-0.5",children:(0,b.jsx)(j.Check,{size:14,className:"text-amber-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800 mb-1",children:"åœºæ™¯æ‰©å±•åˆ†è¾¨çŽ‡è®¾ç½®"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"æ”¯æŒè‡ªå®šä¹‰åˆ†è¾¨çŽ‡è®¾ç½®ï¼Œç”Ÿæˆæ›´é«˜è´¨é‡çš„åœºæ™¯æ‰©å±•å›¾ç‰‡"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"æ™®é€šç”¨æˆ·ä½¿ç”¨é»˜è®¤åˆ†è¾¨çŽ‡"})]})]}),(0,b.jsx)("div",{className:"pt-3 border-t border-gray-100",children:(0,b.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"æ›´å¤šä¼šå‘˜ä¸“å±žåŠŸèƒ½æŒç»­æ›´æ–°ä¸­..."})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3 px-1",children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,b.jsx)(e,{size:18,className:"text-violet-500"}),F?"è¯·é€‰æ‹©å›¾ç‰‡ (1-9å¼ )":"åˆ›ä½œåŽ†å²"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[E.length>0&&!F&&(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:["æœ€è¿‘ ",E.length," æ¡"]}),(0,b.jsx)("button",{onClick:()=>{F?(d((0,q.setIsSelectionMode)(!1)),d((0,q.setSelectedHistoryIds)([]))):d((0,q.setIsSelectionMode)(!0))},className:`text-sm font-medium px-4 py-2 rounded-lg transition-colors ${F?"text-violet-600 bg-violet-50 border border-violet-200":"text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:F?"å–æ¶ˆ":"å¤šé€‰"})]})]}),0===E.length?(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-8 border border-gray-100 flex flex-col items-center justify-center text-gray-400 space-y-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center",children:(0,b.jsx)(f.ImageIcon,{size:24,className:"text-gray-300"})}),(0,b.jsx)("p",{className:"text-sm",children:"æš‚æ— ä½œå“ï¼ŒåŽ»åˆ›ä½œä½ çš„ç¬¬ä¸€å¼ ç”»å§ï¼"}),(0,b.jsx)("button",{onClick:()=>a.push("/create"),className:"text-violet-600 text-sm font-semibold hover:underline",children:"ç«‹å³åˆ›ä½œ"})]}):(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 pb-20",children:E.map(a=>(0,b.jsxs)("div",{onClick:()=>{F?d((0,q.toggleHistorySelection)(a.id)):d((0,q.setViewingHistoryItem)(a.id))},className:`
                      bg-white rounded-2xl overflow-hidden shadow-sm border flex flex-col transition-all cursor-pointer group relative
                      ${F&&G.includes(a.id)?"border-violet-500 ring-2 ring-violet-200":"border-gray-100"}
                    `,children:[(0,b.jsxs)("div",{className:"relative aspect-square bg-gray-100 overflow-hidden",children:[(0,b.jsx)("img",{src:a.url,alt:"History",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),F&&(0,b.jsx)("div",{className:"absolute top-2 right-2",children:G.includes(a.id)?(0,b.jsx)("div",{className:"bg-violet-600 text-white rounded-full p-1 shadow-md",children:(0,b.jsx)(j.Check,{size:16})}):(0,b.jsx)("div",{className:"bg-white/80 rounded-full p-1 shadow-sm",children:(0,b.jsx)(k.Square,{size:16,className:"text-gray-400"})})})]}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-800 font-medium line-clamp-2 mb-1",children:a.prompt}),(0,b.jsx)("div",{className:"flex items-center justify-between text-[10px] text-gray-400",children:(0,b.jsx)("span",{children:new Date(a.timestamp).toLocaleDateString(void 0,{month:"numeric",day:"numeric"})})})]})]},a.id))})]})]}),F&&G.length>0&&(0,b.jsxs)("div",{className:"fixed bottom-20 left-4 right-4 md:left-auto md:right-auto md:max-w-2xl md:w-full md:mx-auto bg-white rounded-2xl shadow-xl shadow-violet-900/10 p-4 border border-violet-100 flex items-center justify-between z-50 animate-in slide-in-from-bottom-4",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-600",children:["å·²é€‰"," ",(0,b.jsx)("span",{className:"text-violet-600 font-bold",children:G.length})," ","å¼ "]}),(0,b.jsxs)("button",{onClick:()=>{let b=E.filter(a=>G.includes(a.id));if(0===b.length)return;let c=b.map(a=>({id:Date.now()+Math.random().toString(),sourceUrl:a.url,generatedUrl:null,text:"é…æ–‡",moodPrompt:"å¯çˆ±çš„è¡¨æƒ…",status:"pending",animation:v.AnimationType.NONE}));d((0,w.setMemeDrafts)(c)),d((0,w.setActiveDraftIndex)(0)),d((0,q.setIsSelectionMode)(!1)),d((0,q.setSelectedHistoryIds)([])),a.push("/meme-editor")},className:"bg-violet-600 text-white px-6 py-2 rounded-xl text-sm font-bold shadow-lg shadow-violet-200 hover:bg-violet-700 transition-colors flex items-center gap-2",children:[(0,b.jsx)(o.Smile,{size:16})," åˆ¶ä½œè¡¨æƒ…åŒ…"]})]}),Q&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/95 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:[(0,b.jsx)("button",{onClick:()=>d((0,q.setViewingHistoryItem)(null)),className:"absolute top-4 right-4 p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-full transition-colors",children:(0,b.jsx)(m.X,{size:24})}),(0,b.jsxs)("div",{className:"w-full max-w-lg md:max-w-4xl flex flex-col gap-6",children:[(0,b.jsx)("img",{src:Q.url,className:"w-full h-auto max-h-[60vh] md:max-h-[80vh] object-contain rounded-lg shadow-2xl shadow-violet-900/20"}),(0,b.jsxs)("div",{className:"space-y-4 px-2",children:[(0,b.jsxs)("div",{className:"text-white/80 space-y-1",children:[(0,b.jsx)("p",{className:"text-xs text-white/40",children:"æç¤ºè¯"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:Q.prompt})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("a",{href:Q.url,download:`history-${Q.id}.png`,className:"flex-1 bg-white text-gray-900 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2",children:[(0,b.jsx)(n.Download,{size:16})," ä¿å­˜"]}),(0,b.jsx)("button",{onClick:async()=>{"LOGGED_IN"===y&&z?await (0,s.deleteHistory)(Q.id)&&d((0,r.removeFromHistory)(Q.id)):d((0,r.removeFromHistory)(Q.id)),d((0,q.setViewingHistoryItem)(null))},className:"flex-none bg-red-500/10 text-red-400 border border-red-500/20 py-3 px-4 rounded-xl flex items-center justify-center hover:bg-red-500/20 transition-colors",children:(0,b.jsx)(l,{size:18})})]})]})]})]})]}),(0,b.jsx)(x.default,{isOpen:I,onClose:()=>d((0,q.setIsPaymentModalOpen)(!1)),onSuccess:()=>{d((0,t.setUserTier)(v.UserTier.PREMIUM)),d((0,q.setIsPaymentModalOpen)(!1))},amount:29.9,productName:"IP åˆ›æƒ³åŠä¼šå‘˜",productDesc:"è§£é”æ¯æ—¥ 50 æ¬¡ç”Ÿæˆé¢åº¦"})]})}a.s(["default",()=>y],65066)}];

//# sourceMappingURL=app_profile_page_tsx_d7e3fb30._.js.map