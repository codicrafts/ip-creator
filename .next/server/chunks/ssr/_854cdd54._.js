module.exports=[66879,a=>{"use strict";let b,c;var d=a.i(43291);async function e(){if(!b){let d=await a.A(21227);b=d.default||d;let e={env:"cloudbase-5gqcz0ab010d3288"},f=process.env.TENCENT_CLOUD_SECRET_ID,g=process.env.TENCENT_CLOUD_SECRET_KEY;f&&g&&(e.secretId=f,e.secretKey=g),b.init(e),c=b.database()}return{cloud:b,db:c}}async function f(a){try{let{db:b}=await e(),c=(0,d.getTodayDateString)(),f=await b.collection("users").doc(a).get();if(!f.data)return null;let g=f.data,h=g.sceneUsage||{date:c,count:0},i=g.memeUsage||{date:c,count:0},j=(0,d.normalizeDateString)(h.date),k=(0,d.normalizeDateString)(i.date);return h=j!==c?{date:c,count:0}:{...h,date:c},i=k!==c?{date:c,count:0}:{...i,date:c},{userId:g._id,phone:g.phone,userTier:g.userTier||"FREE",sceneUsage:h,memeUsage:i}}catch(a){return console.error("Get user info from DB error:",a),null}}a.s(["getCloudDB",()=>e,"getUserInfoFromDB",()=>f])},21227,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[root-of-the-server]__1b5e70ed._.js","server/chunks/ssr/node_modules__pnpm_1af8923e._.js","server/chunks/ssr/[root-of-the-server]__1f3b4d61._.js"].map(b=>a.l(b))).then(()=>b(96122)))}];

//# sourceMappingURL=_854cdd54._.js.map