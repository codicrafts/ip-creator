module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},27699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},57949,a=>{"use strict";let b=(0,a.i(86269).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],57949)},68770,a=>{"use strict";let b=(0,a.i(86269).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);a.s(["Sparkles",()=>b],68770)},16216,a=>{"use strict";let b=(0,a.i(86269).default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);a.s(["RefreshCcw",()=>b],16216)},38752,a=>{"use strict";let b=(0,a.i(86269).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],38752)},1018,a=>{"use strict";let b=(0,a.i(86269).default)("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);a.s(["Smile",()=>b],1018)},73907,a=>{"use strict";var b=a.i(46447),c=a.i(38752),d=a.i(68770);a.s(["default",0,({message:a="æ­£åœ¨ç”Ÿæˆåˆ›æ„..."})=>(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 p-8 text-center",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-violet-500 blur-xl opacity-20 rounded-full animate-pulse"}),(0,b.jsx)(c.Loader2,{className:"relative text-violet-600 w-12 h-12 animate-spin"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center justify-center gap-2",children:[(0,b.jsx)(d.Sparkles,{className:"w-4 h-4 text-amber-400"}),"AI æ­£åœ¨æ€è€ƒ"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 max-w-xs mx-auto",children:a})]})]})])},88431,52255,a=>{"use strict";let b="/api/gemini/generate",c=async(a,b=1024,c=1024)=>new Promise(d=>{let e=new Image;e.src=a,e.onload=()=>{let f=e.width,g=e.height;if(f<=b&&g<=c)return void d(a);f>g?f>b&&(g=Math.round(g*=b/f),f=b):g>c&&(f=Math.round(f*=c/g),g=c);let h=document.createElement("canvas");h.width=f,h.height=g;let i=h.getContext("2d");i?.drawImage(e,0,0,f,g),d(h.toDataURL("image/jpeg",.9))},e.onerror=()=>d(a)}),d=async(a,d,e,f,g,h)=>{try{let d=await c(a),i="image/jpeg";a.startsWith("data:image/png")?i="image/png":a.startsWith("data:image/webp")?i="image/webp":(a.startsWith("data:image/jpeg")||a.startsWith("data:image/jpg"))&&(i="image/jpeg");let j=d.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");if(!j||0===j.length)throw Error("Invalid base64 image data");let k={responseModalities:["IMAGE"]};(f||g||h)&&(k.imageConfig={},f&&(k.imageConfig.aspectRatio=f),h&&(k.imageConfig.outputFormat=h.toLowerCase()));let l={contents:[{parts:[{inlineData:{data:j,mimeType:i}},{text:e}]}],generationConfig:k},m=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!m.ok){let a=`API request failed: ${m.status} ${m.statusText}`;try{let b=await m.json();if(console.error("Gemini API Error:",b),console.error("Request generationConfig:",JSON.stringify(k,null,2)),b.error){let c=b.error;a=c.message||c.localized_message||JSON.stringify(c)||a}else a=JSON.stringify(b)||a}catch(c){let b=await m.text();console.error("Gemini API Error (text):",b),a=b||a}throw Error(a)}let n=await m.json(),o=n.candidates?.[0]?.content?.parts;if(!o)throw Error("No content generated");for(let a of o)if(a.inlineData&&a.inlineData.data){let b=a.inlineData.mimeType||"image/png";return`data:${b};base64,${a.inlineData.data}`}throw Error("No image data found in the response")}catch(a){throw console.error("Gemini API Error:",a),a}},e=async(a,d)=>{try{let e=(await c(a)).replace(/^data:image\/(png|jpeg|webp);base64,/,""),f=`Turn the main character in this image into a high-quality die-cut sticker. 
    Style: Vector art, flat color, thick white outline, white background. 
    Expression/Action: ${d}. 
    Ensure the character is isolated on a pure white background. 
    Do not add text inside the image.`,g={contents:[{parts:[{inlineData:{data:e,mimeType:"image/jpeg"}},{text:f}]}],generationConfig:{responseModalities:["IMAGE"]}},h=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!h.ok){let a;try{let b=await h.json();a=b.error||b.details||JSON.stringify(b)}catch{a=`API request failed: ${h.status} ${h.statusText}`}throw Error(a)}let i=await h.json(),j=i.candidates?.[0]?.content?.parts;if(!j)throw Error("No content generated");for(let a of j)if(a.inlineData&&a.inlineData.data){let b=a.inlineData.mimeType||"image/png";return`data:${b};base64,${a.inlineData.data}`}throw Error("No image data found")}catch(a){throw console.error("Sticker Generation Error:",a),a}};a.s(["generateExtendedScene",0,d,"generateSticker",0,e],88431);var f=a.i(46447),g=a.i(60935);let h=(0,a.i(86269).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var i=a.i(16216),j=a.i(3752);let k=[{id:j.AnimationType.NONE,label:"é™æ€",icon:(0,f.jsx)(g.Square,{size:14})},{id:j.AnimationType.SHAKE,label:"é¢¤æŠ–",icon:(0,f.jsx)(h,{size:14})},{id:j.AnimationType.PULSE,label:"è„‰å†²",icon:(0,f.jsx)("div",{className:"w-3 h-3 rounded-full border-2 border-current"})},{id:j.AnimationType.ZOOM,label:"æ”¾å¤§",icon:(0,f.jsx)("div",{className:"text-xs",children:"ðŸ”"})},{id:j.AnimationType.SPIN,label:"æ—‹è½¬",icon:(0,f.jsx)(i.RefreshCcw,{size:14})}];a.s(["ANIMATION_OPTIONS",0,k,"MOOD_PACKS",0,[{id:"custom",label:"è‡ªå®šä¹‰",items:[]},{id:"worker",label:"æ‰“å·¥äºº",items:[{text:"æ”¶åˆ°",prompt:"æ•¬ç¤¼ï¼Œçœ¼ç¥žåšå®šï¼Œæˆ´ç€é¢†å¸¦ï¼ŒèŒä¸šæ„Ÿ"},{text:"ä¸‹ç­",prompt:"é£žå¿«åœ°é€ƒè·‘ï¼Œå¼€å¿ƒï¼Œæ¨¡ç³Šçš„èƒŒæ™¯"},{text:"å¤ªéš¾äº†",prompt:"èººåœ¨åœ°ä¸Šï¼Œç²¾ç–²åŠ›å°½ï¼Œæµç€å¤¸å¼ çš„çœ¼æ³ª"},{text:"æ‘¸é±¼",prompt:"å–ç€å’–å•¡ï¼Œæˆ´ç€å¢¨é•œï¼Œæ‚ é—²æ”¾æ¾"}]},{id:"daily",label:"æ—¥å¸¸",items:[{text:"æ—©ä¸Šå¥½",prompt:"æŒ¥æ‰‹ï¼Œå¼€å¿ƒå¤§ç¬‘ï¼Œé˜³å…‰èƒŒæ™¯"},{text:"æ™šå®‰",prompt:"ç¡è§‰ï¼Œæˆ´ç€ç¡å¸½ï¼Œå®‰è¯¦"},{text:"è°¢è°¢",prompt:"éž èº¬ï¼ŒåŒæ‰‹æ¯”å¿ƒï¼Œæ„Ÿæ¿€"},{text:"ï¼Ÿ",prompt:"å›°æƒ‘çš„è¡¨æƒ…ï¼Œæ»¡å¤´é—®å·"}]}],"PRESET_STYLES",0,[{id:"realistic",label:"å†™å®žæ‘„å½±",value:"photorealistic, 8k, highly detailed, cinematic lighting, realistic textures"},{id:"anime",label:"æ—¥ç³»åŠ¨æ¼«",value:"anime style, studio ghibli, vibrant colors, cel shading, detailed background"},{id:"watercolor",label:"æ¸…æ–°æ°´å½©",value:"watercolor painting, soft edges, artistic, pastel colors, dreamy atmosphere"},{id:"cyberpunk",label:"èµ›åšæœ‹å…‹",value:"cyberpunk, neon lights, futuristic city, high contrast, tech noir"},{id:"3d",label:"3D æ¸²æŸ“",value:"3D render, blender, unreal engine 5, c4d, clay material, soft lighting"},{id:"illustration",label:"æ‰å¹³æ’ç”»",value:"flat illustration, vector art, minimal, clean lines, bold colors"},{id:"oil",label:"æ²¹ç”»é£Žæ ¼",value:"oil painting, textured brushstrokes, classical art style, van gogh style"},{id:"pixel",label:"åƒç´ è‰ºæœ¯",value:"pixel art, 8-bit, retro game style, blocky"}]],52255)},90124,a=>{"use strict";var b=a.i(46447),c=a.i(97643),d=a.i(16616);let e=(0,a.i(86269).default)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var f=a.i(79469),g=a.i(4204);a.s(["default",0,({isOpen:a,onClose:h,onLogin:i,onUpgrade:j,userStatus:k,remainingQuota:l,limit:m,type:n})=>{if(!a)return null;let o="scene"===n?"åœºæ™¯æ‰©å±•":"è¡¨æƒ…åŒ…åˆ¶ä½œ";return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,b.jsx)("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md mx-4 overflow-hidden animate-in zoom-in-95 duration-200",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:(0,b.jsx)(d.Zap,{size:24,className:"text-red-600"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"é¢åº¦ä¸è¶³"})]}),(0,b.jsx)("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,b.jsx)(c.X,{size:20,className:"text-gray-500"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"bg-gray-50 rounded-2xl p-4",children:(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["å‰©ä½™ ",o," é¢åº¦"]}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[l," ",(0,b.jsxs)("span",{className:"text-lg text-gray-500",children:["/ ",m]})]})]})}),(0,b.jsx)("div",{className:"space-y-3",children:k===g.UserStatus.GUEST?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-gray-700 text-center",children:"æ¸¸å®¢ä½“éªŒæ¬¡æ•°å·²ç”¨å®Œï¼"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:["ç™»å½•åŽå¯èŽ·å¾—æ¯æ—¥ 5 æ¬¡ ",o," é¢åº¦"]}),(0,b.jsxs)("button",{onClick:()=>{h(),i?.()},className:"w-full py-3 rounded-xl font-semibold bg-violet-600 text-white hover:bg-violet-700 transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)(e,{size:18}),"ç«‹å³ç™»å½•"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-gray-700 text-center",children:[o,"é¢åº¦ä¸è¶³ï¼"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:["å‡çº§ä¼šå‘˜å¯èŽ·å–æ¯æ—¥ 50 æ¬¡ ",o," é¢åº¦"]}),(0,b.jsxs)("button",{onClick:()=>{h(),j?.()},className:"w-full py-3 rounded-xl font-semibold bg-amber-400 text-amber-900 hover:bg-amber-300 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-amber-900/20",children:[(0,b.jsx)(f.Crown,{size:18}),"å‡çº§ä¼šå‘˜"]})]})})]})]})})})}],90124)},65748,a=>{a.v(a=>Promise.resolve().then(()=>a(34528)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__04bfe36d._.js.map